(this["webpackJsonpdgi-portal"]=this["webpackJsonpdgi-portal"]||[]).push([[17],{207:function(e,t,a){"use strict";a.r(t);var n=a(29),r=a(0),c=a.n(r),s=a(97),l=a(76),o=a(105),i=a(149),u=a(89),m=a(98),d=a(2),p=a(11),f=a(71),b=a(80),E=a(54),v=a(60),h=a(28),g=a(84),O=a.n(g);t.default=function(){var e=Object(d.g)(),t=Object(d.h)(),a=E.a+"storage/",g=Object(r.useState)([]),j=Object(n.a)(g,2),N=j[0],y=j[1],w=Object(r.useState)(!0),S=Object(n.a)(w,2),C=S[0],x=S[1],_=function(e){e.target.src=O.a},A=function(t){e.push({pathname:"/personnels/details",state:{item:t}})},k=function(){t.state&&t.state.newValue&&(Object(v.a)().fire("Utilisateur ajout\xe9 avec succ\xe8s","","success"),console.log(t.state.newValue),e.replace());var a=JSON.parse(localStorage.getItem("personnels"));if(a)return x(!1),y(a);b.a.getAll().then((function(e){var t=e.data;y(t),localStorage.setItem("personnels",JSON.stringify(t))})).catch((function(e){localStorage.removeItem("personnels"),Object(v.c)(e)})).finally((function(){x(!1)}))};return Object(r.useEffect)((function(){k()}),[]),c.a.createElement(h.a,null,c.a.createElement(s.a,null,c.a.createElement(l.a,null,c.a.createElement(o.a,{className:"Recent-Users"},c.a.createElement(o.a.Header,null,c.a.createElement(o.a.Title,{as:"h5"},"Liste des utilisateurs"),c.a.createElement("div",{className:"card-header-right"},c.a.createElement(p.b,{to:"/personnels/new"},c.a.createElement(i.a,{variant:"secondary",size:"sm"},c.a.createElement("i",{className:"feather icon-user-plus"}),"AJOUTER")))),c.a.createElement(o.a.Body,{className:"px-0 py-2"},c.a.createElement(u.a,{responsive:!0,hover:!0},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,"#"),c.a.createElement("td",null,"Utilisateur"),c.a.createElement("td",null,"Droit d'utilisation"),c.a.createElement("td",null,"Date de cr\xe9ation"),c.a.createElement("td",null,"Options")),C?c.a.createElement("tr",{className:"unread text-center"},c.a.createElement("td",{colSpan:4},c.a.createElement(m.a,{animation:"border",role:"status"}))):N.length>0?N.map((function(e){return c.a.createElement("tr",{className:"unread",key:e.id,style:{cursor:"pointer"},onClick:function(){return A(e)}},c.a.createElement("td",null,c.a.createElement(f.LazyLoadImage,{onError:_,className:"rounded-circle",style:{width:"40px"},src:a+e.photo,alt:"activity-user"})),c.a.createElement("td",null,c.a.createElement("h6",{className:"mb-1"},e.nom," ",e.prenom),c.a.createElement("small",{className:"m-0"},e.email)),c.a.createElement("td",null,c.a.createElement("h6",{className:"mb-1"},1===e.type_user_id?"Administrateur":"Utilisateur")),c.a.createElement("td",null,c.a.createElement("h6",{className:"text-muted"},e.created_at)),c.a.createElement("td",null,c.a.createElement("button",{className:"theme-bg-btn red",onClick:function(){return t=e.personnel.id,void Object(v.b)().fire({preConfirm:function(){return Object(v.b)().getCancelButton().setAttribute("style","display:none"),localStorage.removeItem("personnels"),b.a.delete(t).then((function(e){Object(v.a)().fire(e.data.message,"","success")})).catch((function(e){Object(v.b)().close(),setTimeout((function(){return Object(v.c)(e)}),500)})).finally((function(){return k()}))}});var t}},"Supprimer"),c.a.createElement("button",{className:"theme-bg-btn blue",onClick:function(){return A(e)}},"D\xe9tails")))})):c.a.createElement("tr",{className:"unread text-center"},c.a.createElement("td",{colSpan:4},"Aucune r\xe9sultat")))))))))}},56:function(e,t,a){"use strict";var n=a(61),r=a.n(n),c=a(54),s=JSON.parse(localStorage.getItem("user")),l=null!==s?s.token:"",o=r.a.create({baseURL:"".concat(c.a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}});t.a=o},60:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return c}));var n=a(67),r=a.n(n),c=(a(68),function(){return r.a.mixin({toast:!0,showConfirmButton:!1,customClass:{container:"ml-popup",popup:"hover-popup"},showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"}})}),s=function(){return r.a.mixin({backdrop:!0,title:"Attention",text:"Voulez vous vraiment supprimer ?",icon:"warning",buttonsStyling:!1,customClass:{popup:"swal-sm",confirmButton:"btn btn-danger btn-sm",cancelButton:"btn btn-secondary btn-sm"},confirmButtonText:"Confirmer",cancelButtonText:"Annuler",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,showLoaderOnConfirm:!0})},l=function(e){e.response.data?c().fire({title:e.response.data.message,icon:"error"}):c().fire({title:"Erreur survenue au serveur",html:"Veuillez contacter l'administrateur",icon:"error"})}},80:function(e,t,a){"use strict";var n=a(15),r=a(14),c=a(56),s=Object(n.a)((function e(){Object(r.a)(this,e)}));s.getAll=function(){return c.a.get("".concat(l))},s.getAllDemandes=function(){return c.a.get("api/users/demandes")},s.validateStatus=function(e,t){return e?c.a.get("api/users/validate/".concat(t)):c.a.get("api/users/unvalidate/".concat(t))},s.unValidateStatus=function(e){return c.a.get("api/users/unvalidate/".concat(e))},s.add=function(e){return c.a.post("".concat(l),e)},s.delete=function(e){return c.a.delete("".concat(l,"/").concat(e))},s.update=function(e,t){return c.a.put("".concat(l,"/").concat(t),e)};var l="api/personnels";t.a=s},89:function(e,t,a){"use strict";var n=a(1),r=a(5),c=a(52),s=a.n(c),l=a(0),o=a.n(l),i=a(53),u=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],m=o.a.forwardRef((function(e,t){var a=e.bsPrefix,c=e.className,l=e.striped,m=e.bordered,d=e.borderless,p=e.hover,f=e.size,b=e.variant,E=e.responsive,v=Object(r.a)(e,u),h=Object(i.a)(a,"table"),g=s()(c,h,b&&h+"-"+b,f&&h+"-"+f,l&&h+"-striped",m&&h+"-bordered",d&&h+"-borderless",p&&h+"-hover"),O=o.a.createElement("table",Object(n.a)({},v,{className:g,ref:t}));if(E){var j=h+"-responsive";return"string"===typeof E&&(j=j+"-"+E),o.a.createElement("div",{className:j},O)}return O}));t.a=m}}]);
//# sourceMappingURL=17.39717876.chunk.js.map