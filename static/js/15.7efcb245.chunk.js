(this["webpackJsonpdgi-portal"]=this["webpackJsonpdgi-portal"]||[]).push([[15],{483:function(e,t,a){"use strict";a.r(t);var n=a(29),r=a(0),c=a.n(r),s=a(97),l=a(76),o=a(105),u=a(89),i=a(98),m=a(71),d=a(80),p=a(54),f=a(60),b=a(28),E=a(84),v=a.n(E);t.default=function(){var e=p.a+"storage/",t=Object(r.useState)([]),a=Object(n.a)(t,2),E=a[0],g=a[1],h=Object(r.useState)(-1),N=Object(n.a)(h,2),O=N[0],S=N[1],x=Object(r.useState)(!0),y=Object(n.a)(x,2),j=y[0],w=y[1],C=function(e){e.target.src=v.a},_=function(e,t){return S(t),console.log(e),d.a.validateStatus(e,t).then((function(e){localStorage.removeItem("demandes")})).catch((function(e){Object(f.c)(e)})).finally((function(){S(-1),k()}))},k=function(){var e=JSON.parse(localStorage.getItem("demandes"));if(e)return w(!1),g(e);d.a.getAllDemandes().then((function(e){var t=e.data;g(t),localStorage.setItem("demandes",JSON.stringify(t))})).catch((function(e){localStorage.removeItem("demandes"),Object(f.c)(e)})).finally((function(){w(!1)}))};return Object(r.useEffect)((function(){k()}),[]),c.a.createElement(b.a,null,c.a.createElement(s.a,null,c.a.createElement(l.a,null,c.a.createElement(o.a,{className:"Recent-Users"},c.a.createElement(o.a.Header,null,c.a.createElement(o.a.Title,{as:"h5"},"Liste des demandes d'activation d'un compte")),c.a.createElement(o.a.Body,{className:"px-0 py-2"},c.a.createElement(u.a,{responsive:!0,hover:!0},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,"#"),c.a.createElement("td",null,"Utilisateur"),c.a.createElement("td",null,"Date d'envoi"),c.a.createElement("td",null,"Status"),c.a.createElement("td",null,"Options")),j?c.a.createElement("tr",{className:"unread text-center"},c.a.createElement("td",{colSpan:5},c.a.createElement(i.a,{animation:"border",role:"status"}))):E.length>0?E.map((function(t){return c.a.createElement("tr",{className:"unread",key:t.id,style:{cursor:"pointer"}},c.a.createElement("td",null,c.a.createElement(m.LazyLoadImage,{onError:C,className:"rounded-circle",style:{width:"40px"},src:e+t.user.photo,alt:"activity-user"})),c.a.createElement("td",null,c.a.createElement("h6",{className:"mb-1"},t.user.nom," ",t.user.prenom),c.a.createElement("small",{className:"m-0"},t.user.email)),c.a.createElement("td",null,c.a.createElement("h6",{className:"text-muted"},t.created_at)),c.a.createElement("td",null,0!==t.user.status&&c.a.createElement("h6",{className:"m-0 text-c-green"},c.a.createElement("i",{className:"fa fa-circle text-c-green f-10 m-r-15"})," Activ\xe9 ")||c.a.createElement("h6",{className:"m-0 text-c-red"},c.a.createElement("i",{className:"fa fa-circle text-c-red f-10 m-r-15"})," Non activ\xe9 ")),c.a.createElement("td",null,O===t.id&&c.a.createElement("button",{className:"theme-bg-btn blue",disabled:!0}," En cours ... ")||0===t.user.status&&c.a.createElement("button",{className:"theme-bg-btn blue",onClick:function(){return _(0===t.user.status,t.user.id)}},"Valider")||c.a.createElement("button",{className:"theme-bg-btn red",onClick:function(){return _(0===t.user.status,t.user.id)}},"D\xe9valider")))})):c.a.createElement("tr",{className:"unread text-center"},c.a.createElement("td",{colSpan:5},"Aucune r\xe9sultat")))))))))}},56:function(e,t,a){"use strict";var n=a(61),r=a.n(n),c=a(54),s=JSON.parse(localStorage.getItem("user")),l=null!==s?s.token:"",o=r.a.create({baseURL:"".concat(c.a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}});t.a=o},60:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return c}));var n=a(67),r=a.n(n),c=(a(68),function(){return r.a.mixin({toast:!0,showConfirmButton:!1,customClass:{container:"ml-popup",popup:"hover-popup"},showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"}})}),s=function(){return r.a.mixin({backdrop:!0,title:"Attention",text:"Voulez vous vraiment supprimer ?",icon:"warning",buttonsStyling:!1,customClass:{popup:"swal-sm",confirmButton:"btn btn-danger btn-sm",cancelButton:"btn btn-secondary btn-sm"},confirmButtonText:"Confirmer",cancelButtonText:"Annuler",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,showLoaderOnConfirm:!0})},l=function(e){e.response.data?c().fire({title:e.response.data.message,icon:"error"}):c().fire({title:"Erreur survenue au serveur",html:"Veuillez contacter l'administrateur",icon:"error"})}},80:function(e,t,a){"use strict";var n=a(15),r=a(14),c=a(56),s=Object(n.a)((function e(){Object(r.a)(this,e)}));s.getAll=function(){return c.a.get("".concat(l))},s.getAllDemandes=function(){return c.a.get("api/users/demandes")},s.validateStatus=function(e,t){return e?c.a.get("api/users/validate/".concat(t)):c.a.get("api/users/unvalidate/".concat(t))},s.unValidateStatus=function(e){return c.a.get("api/users/unvalidate/".concat(e))},s.add=function(e){return c.a.post("".concat(l),e)},s.delete=function(e){return c.a.delete("".concat(l,"/").concat(e))},s.update=function(e,t){return c.a.put("".concat(l,"/").concat(t),e)};var l="api/personnels";t.a=s},89:function(e,t,a){"use strict";var n=a(1),r=a(5),c=a(52),s=a.n(c),l=a(0),o=a.n(l),u=a(53),i=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],m=o.a.forwardRef((function(e,t){var a=e.bsPrefix,c=e.className,l=e.striped,m=e.bordered,d=e.borderless,p=e.hover,f=e.size,b=e.variant,E=e.responsive,v=Object(r.a)(e,i),g=Object(u.a)(a,"table"),h=s()(c,g,b&&g+"-"+b,f&&g+"-"+f,l&&g+"-striped",m&&g+"-bordered",d&&g+"-borderless",p&&g+"-hover"),N=o.a.createElement("table",Object(n.a)({},v,{className:h,ref:t}));if(E){var O=g+"-responsive";return"string"===typeof E&&(O=O+"-"+E),o.a.createElement("div",{className:O},N)}return N}));t.a=m}}]);
//# sourceMappingURL=15.7efcb245.chunk.js.map