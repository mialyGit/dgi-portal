(this["webpackJsonpdgi-portal"]=this["webpackJsonpdgi-portal"]||[]).push([[13],{112:function(e,a,t){"use strict";var n=t(1),r=t(5),l=t(52),c=t.n(l),i=t(0),s=t.n(i),o=t(53),p=["bsPrefix","className","noGutters","as"],m=["xl","lg","md","sm","xs"],u=s.a.forwardRef((function(e,a){var t=e.bsPrefix,l=e.className,i=e.noGutters,u=e.as,d=void 0===u?"div":u,b=Object(r.a)(e,p),f=Object(o.a)(t,"row"),v=f+"-cols",E=[];return m.forEach((function(e){var a,t=b[e];delete b[e];var n="xs"!==e?"-"+e:"";null!=(a=null!=t&&"object"===typeof t?t.cols:t)&&E.push(""+v+n+"-"+a)})),s.a.createElement(d,Object(n.a)({ref:a},b,{className:c.a.apply(void 0,[l,f,i&&"no-gutters"].concat(E))}))}));u.displayName="Row",u.defaultProps={noGutters:!1},a.a=u},113:function(e,a,t){"use strict";var n=t(1),r=t(5),l=t(52),c=t.n(l),i=t(0),s=t.n(i),o=t(53),p=["bsPrefix","variant","animation","size","children","as","className"],m=s.a.forwardRef((function(e,a){var t=e.bsPrefix,l=e.variant,i=e.animation,m=e.size,u=e.children,d=e.as,b=void 0===d?"div":d,f=e.className,v=Object(r.a)(e,p),E=(t=Object(o.a)(t,"spinner"))+"-"+i;return s.a.createElement(b,Object(n.a)({ref:a},v,{className:c()(f,E,m&&E+"-"+m,l&&"text-"+l)}),u)}));m.displayName="Spinner",a.a=m},128:function(e,a,t){"use strict";var n=t(1),r=t(5),l=t(52),c=t.n(l),i=t(0),s=t.n(i),o=t(53),p=t(67),m=function(e){return s.a.forwardRef((function(a,t){return s.a.createElement("div",Object(n.a)({},a,{ref:t,className:c()(a.className,e)}))}))},u=s.a.createContext(null);u.displayName="CardContext";var d=u,b=["bsPrefix","className","variant","as"],f=s.a.forwardRef((function(e,a){var t=e.bsPrefix,l=e.className,i=e.variant,p=e.as,m=void 0===p?"img":p,u=Object(r.a)(e,b),d=Object(o.a)(t,"card-img");return s.a.createElement(m,Object(n.a)({ref:a,className:c()(i?d+"-"+i:d,l)},u))}));f.displayName="CardImg",f.defaultProps={variant:null};var v=f,E=["bsPrefix","className","bg","text","border","body","children","as"],h=m("h5"),g=m("h6"),j=Object(p.a)("card-body"),N=Object(p.a)("card-title",{Component:h}),O=Object(p.a)("card-subtitle",{Component:g}),_=Object(p.a)("card-link",{Component:"a"}),x=Object(p.a)("card-text",{Component:"p"}),y=Object(p.a)("card-header"),C=Object(p.a)("card-footer"),k=Object(p.a)("card-img-overlay"),w=s.a.forwardRef((function(e,a){var t=e.bsPrefix,l=e.className,p=e.bg,m=e.text,u=e.border,b=e.body,f=e.children,v=e.as,h=void 0===v?"div":v,g=Object(r.a)(e,E),N=Object(o.a)(t,"card"),O=Object(i.useMemo)((function(){return{cardHeaderBsPrefix:N+"-header"}}),[N]);return s.a.createElement(d.Provider,{value:O},s.a.createElement(h,Object(n.a)({ref:a},g,{className:c()(l,N,p&&"bg-"+p,m&&"text-"+m,u&&"border-"+u)}),b?s.a.createElement(j,null,f):f))}));w.displayName="Card",w.defaultProps={body:!1},w.Img=v,w.Title=N,w.Subtitle=O,w.Body=j,w.Link=_,w.Text=x,w.Header=y,w.Footer=C,w.ImgOverlay=k;a.a=w},178:function(e,a,t){"use strict";t.r(a);var n=t(30),r=t(3),l=t(29),c=t(0),i=t.n(c),s=t(2),o=t(11),p=t(112),m=t(77),u=t(127),d=t(128),b=t(78),f=t(491),v=t(114),E=t(142),h=t(113),g=t(28),j=t(76),N=t(57);a.default=function(){var e=Object(c.useRef)(),a=Object(s.g)(),t=Object(c.useState)({code_app:"",nom_app:"",abrev_app:"",desc_app:"",lien_app:"https://",type_app:0,file:""}),O=Object(l.a)(t,2),_=O[0],x=O[1],y=Object(c.useState)(!1),C=Object(l.a)(y,2),k=C[0],w=C[1],z=Object(c.useState)({}),P=Object(l.a)(z,2),L=P[0],S=P[1],A=Object(c.useState)(void 0),R=Object(l.a)(A,2),T=R[0],G=R[1],F=Object(c.useState)(0),I=Object(l.a)(F,2),V=I[0],B=I[1],D=Object(c.useState)(N.b+"/no-import.png"),H=Object(l.a)(D,2),J=H[0],U=H[1],W=Object(c.useState)({color:"text-muted",text:"Veuillez importer une ic\xf4ne ici"}),M=Object(l.a)(W,2),q=M[0],K=M[1],Q=Object(c.useState)("https://www.impots.mg"),X=Object(l.a)(Q,2),Y=X[0],Z=X[1],$=function(e){var a=e.target,t=a.name,l=a.value;x(Object(r.a)(Object(r.a)({},_),{},Object(n.a)({},t,l))),L[t]&&S(Object(r.a)(Object(r.a)({},L),{},Object(n.a)({},t,null)))},ee=function(e){var a=parseInt(e.target.value),t=e.target.getAttribute("data-link"),n=e.target.getAttribute("data-example");Z(n),x(Object(r.a)(Object(r.a)({},_),{},{type_app:a,lien_app:t}))};function ae(e){setTimeout((function(){var a=parseInt(e.loaded/e.target.fileSize*100,10);B(a),"loadend"===e.type&&(K({color:"text-muted",text:e.target.fileName}),U(e.target.result),x(Object(r.a)(Object(r.a)({},_),{},{file:e.target.result})),console.log(e.target.result),setTimeout((function(){B(0)}),100))}),500)}return i.a.createElement(g.a,null,i.a.createElement(p.a,null,i.a.createElement(m.a,null,i.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),w(!0),G(void 0);var t=function(){var e=_.code_app,a=_.nom_app,t=_.lien_app,n=_.type_app,r={};return e&&""!==e.trim()||(r.code_app="Veuillez entrer le code de l'application"),a&&""!==a.trim()||(r.nom_app="Veuillez entrer le nom de l'application"),t&&""!==t.trim()?0!==n||t.trim().startsWith("http://")||t.trim().startsWith("https://")?1!==n||t.trim().startsWith("/")||(r.lien_app="Le lien vers l'application privilegi\xe9e doit commencer par '/'"):r.lien_app="Veuillez entrer une url valide":r.lien_app="Veuillez entrer le lien vers l'application",r}();if(Object.keys(t).length>0)return w(!1),S(t);var n=Object(r.a)({},_);1===n.type_app&&(n.lien_app="".concat(N.b,"/_apps").concat(n.lien_app)),console.log(n),j.a.add(n).then((function(e){console.log(e),localStorage.removeItem("apps"),a.push("/apps")})).catch((function(e){e.response.data?G(e.response.data.message):G("Erreur survenue au serveur \n Veuillez contacter l'administrateur."),w(!1)}))}},i.a.createElement(d.a,null,i.a.createElement(d.a.Header,null,i.a.createElement(d.a.Title,{as:"h5"}," Ajouter une nouvelle application ")),i.a.createElement(d.a.Body,null,i.a.createElement(p.a,null,i.a.createElement(m.a,{md:2},i.a.createElement(d.a,{onClick:function(){return e.current.click()}},i.a.createElement(d.a.Img,{style:{height:"100%"},variant:"top",src:J,alt:"activity-user"}),i.a.createElement("small",{className:"mt-3 text-center ".concat(q.color)},q.text),i.a.createElement(b.a,{type:"file",id:"logo_app",name:"logo_app",accept:"image/*",ref:e,onChange:function(e){var a=e.target.files[0];if(a){var t=a.name.split(".").pop().toLowerCase();if(["jpg","jpeg","png"].indexOf(t)>-1){var n=new FileReader;n.fileName=a.name,n.fileSize=a.size,function(e){e.addEventListener("loadstart",ae),e.addEventListener("load",ae),e.addEventListener("loadend",ae),e.addEventListener("progress",ae),e.addEventListener("error",ae),e.addEventListener("abort",ae)}(n),n.readAsDataURL(a)}else K({color:"text-danger",text:"Fichier invalide!"})}},hidden:!0})),i.a.createElement(f.a,{className:0===V&&"d-none",animated:!0,now:V})),i.a.createElement(m.a,null),i.a.createElement(m.a,{md:8},i.a.createElement(u.a.Group,{as:p.a,className:"mb-3"},i.a.createElement(u.a.Label,{column:!0,sm:3},"Code Application "),i.a.createElement(m.a,null,i.a.createElement(v.a,{size:"sm",id:"inputGroup-nom"},i.a.createElement(v.a.Prepend,null,i.a.createElement(v.a.Text,null,i.a.createElement("i",{className:"feather icon-user"}))),i.a.createElement(b.a,{className:L.code_app&&"is-invalid",id:"code_app",name:"code_app",placeholder:"Code Application",value:_.code_app,onChange:$}),i.a.createElement(b.a.Feedback,{type:"invalid",className:"text-right"},L.code_app)))),i.a.createElement(u.a.Group,{as:p.a,className:"mb-3"},i.a.createElement(u.a.Label,{column:!0,sm:3},"Nom de l'application "),i.a.createElement(m.a,null,i.a.createElement(v.a,{size:"sm"},i.a.createElement(v.a.Prepend,null,i.a.createElement(v.a.Text,null,i.a.createElement("i",{className:"feather icon-user"}))),i.a.createElement(b.a,{className:L.nom_app&&"is-invalid",id:"nom_app",name:"nom_app",placeholder:"Nom de l'application",value:_.nom_app,onChange:$}),i.a.createElement(b.a.Feedback,{type:"invalid",className:"text-right"},L.nom_app)))),i.a.createElement(u.a.Group,{as:p.a,className:"mb-3"},i.a.createElement(u.a.Label,{column:!0,sm:3},"Abr\xe9viation "),i.a.createElement(m.a,null,i.a.createElement(v.a,{size:"sm"},i.a.createElement(v.a.Prepend,null,i.a.createElement(v.a.Text,null,i.a.createElement("i",{className:"feather icon-user"}))),i.a.createElement(b.a,{id:"abrev_app",name:"abrev_app",placeholder:"Abr\xe9viation",value:_.abrev_app,onChange:$})))),i.a.createElement(u.a.Group,{as:p.a,className:"mb-3"},i.a.createElement(u.a.Label,{column:!0,sm:3}," Type d'application "),i.a.createElement(m.a,{className:"mt-2"},i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{"data-example":"https://www.impots.mg","data-link":"https://",name:"type_app",type:"radio",id:"type_app_0",className:"form-check-input",value:"0",style:{cursor:"pointer"},checked:0===_.type_app,onChange:ee}),i.a.createElement("label",{title:"",htmlFor:"type_app_0",className:"form-check-label",style:{cursor:"pointer"}},"Application par d\xe9faut"))),i.a.createElement(m.a,{className:"mt-2"},i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{"data-example":"/ift-ifpb","data-link":"/",name:"type_app",type:"radio",id:"type_app_1",className:"form-check-input",value:"1",style:{cursor:"pointer"},checked:1===_.type_app,onChange:ee}),i.a.createElement("label",{title:"",htmlFor:"type_app_1",className:"form-check-label",style:{cursor:"pointer"}},"Application privilegi\xe9e")))))),i.a.createElement(p.a,null,i.a.createElement(m.a,{md:6},i.a.createElement(u.a.Group,{className:"mb-3"},i.a.createElement(u.a.Label,null,"Description "),i.a.createElement(u.a.Control,{as:"textarea",rows:"5",id:"desc_app",name:"desc_app",value:_.desc_app,onChange:$}))),i.a.createElement(m.a,{md:6},i.a.createElement(u.a.Group,{className:"mb-3"},i.a.createElement(u.a.Label,null,"Lien ",i.a.createElement("small",{className:"text-muted"},"(ex : ",Y,") ")," "),i.a.createElement(u.a.Control,{className:L.lien_app&&"is-invalid",as:"textarea",rows:"1",id:"lien_app",name:"lien_app",value:_.lien_app,onChange:$}),i.a.createElement(b.a.Feedback,{type:"invalid",className:"text-right"},L.lien_app)),T&&i.a.createElement("p",{className:"text-danger form-text m-3"},T),k&&i.a.createElement(E.a,{variant:"primary",className:"pull-right mt-2",disabled:!0},i.a.createElement(h.a,{as:"span",className:"mr-2",size:"sm",animation:"border",role:"status","aria-hidden":"true"}),"Veuillez patientez ...")||i.a.createElement("div",{className:"pull-right mt-2"},i.a.createElement(o.b,{to:"/apps"},i.a.createElement(E.a,{variant:"secondary",size:"sm"},i.a.createElement("i",{className:"feather icon-x-circle"}),"Annuler")),i.a.createElement(E.a,{type:"submit",variant:"primary",size:"sm"},i.a.createElement("i",{className:"feather icon-save"}),"Sauvegarder"))))))))))}},58:function(e,a,t){"use strict";var n=t(62),r=t.n(n),l=t(57),c=JSON.parse(localStorage.getItem("user")),i=null!==c?c.token:"",s=r.a.create({baseURL:"".concat(l.a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)}});a.a=s},76:function(e,a,t){"use strict";var n=t(15),r=t(14),l=t(58),c=Object(n.a)((function e(){Object(r.a)(this,e)}));c.getAll=function(){return l.a.get("".concat(i))},c.delete=function(e){return l.a.delete("".concat(i,"/").concat(e))},c.update=function(e,a){return l.a.post("".concat(i,"/").concat(e,"?_method=PUT"),a)},c.add=function(e){return l.a.post("".concat(i),e)};var i="api/applications";a.a=c},77:function(e,a,t){"use strict";var n=t(1),r=t(5),l=t(52),c=t.n(l),i=t(0),s=t.n(i),o=t(53),p=["bsPrefix","className","as"],m=["xl","lg","md","sm","xs"],u=s.a.forwardRef((function(e,a){var t=e.bsPrefix,l=e.className,i=e.as,u=void 0===i?"div":i,d=Object(r.a)(e,p),b=Object(o.a)(t,"col"),f=[],v=[];return m.forEach((function(e){var a,t,n,r=d[e];if(delete d[e],"object"===typeof r&&null!=r){var l=r.span;a=void 0===l||l,t=r.offset,n=r.order}else a=r;var c="xs"!==e?"-"+e:"";a&&f.push(!0===a?""+b+c:""+b+c+"-"+a),null!=n&&v.push("order"+c+"-"+n),null!=t&&v.push("offset"+c+"-"+t)})),f.length||f.push(b),s.a.createElement(u,Object(n.a)({},d,{ref:a,className:c.a.apply(void 0,[l].concat(f,v))}))}));u.displayName="Col",a.a=u}}]);
//# sourceMappingURL=13.2fd77066.chunk.js.map