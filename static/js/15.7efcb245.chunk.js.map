{"version":3,"sources":["components/Administrateur/Demande/index.js","utils/index.js","components/Common/SweetModal.js","utils/pers.js","../node_modules/react-bootstrap/esm/Table.js"],"names":["Demande","path","API_SERVER","useState","rows","setRows","loadingStatus","setLoadingStatus","loading","setLoading","defaultSrcImg","e","target","src","Avatar2","validate","id","console","log","PersApi","validateStatus","then","res","localStorage","removeItem","catch","err","errorModal","finally","getAll","data","JSON","parse","getItem","getAllDemandes","setItem","stringify","useEffect","className","Header","Title","as","Body","responsive","hover","colSpan","animation","role","length","map","item","key","style","onError","width","user","photo","alt","nom","prenom","email","created_at","status","disabled","onClick","token","axios","Axios","create","baseURL","headers","Authorization","Toast","Swal","mixin","toast","showConfirmButton","customClass","container","popup","showClass","hideClass","deleteModal","backdrop","title","text","icon","buttonsStyling","confirmButton","cancelButton","confirmButtonText","cancelButtonText","showCancelButton","allowOutsideClick","allowEscapeKey","showLoaderOnConfirm","response","fire","message","html","get","base","unValidateStatus","add","post","delete","update","put","_excluded","Table","React","forwardRef","_ref","ref","bsPrefix","striped","bordered","borderless","size","variant","props","_objectWithoutPropertiesLoose","decoratedBsPrefix","useBootstrapPrefix","classes","classNames","table","createElement","_extends","responsiveClass"],"mappings":"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","file":"static/js/15.7efcb245.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport {Row, Col, Card, Table, Spinner } from 'react-bootstrap';\r\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\r\n\r\nimport PersApi from \"utils/pers\";\r\nimport { API_SERVER } from \"config/constant\";\r\nimport { errorModal } from \"../../Common/SweetModal\"\r\nimport Aux from \"hoc/_Aux\";\r\nimport Avatar2 from \"assets/images/user/avatar-2.jpg\"\r\n\r\nconst Demande = () => {\r\n\r\n    const path = API_SERVER + 'storage/';\r\n    const [rows, setRows] = useState([]);\r\n    const [loadingStatus, setLoadingStatus] = useState(-1);\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    const defaultSrcImg = (e) => {\r\n        e.target.src = Avatar2\r\n    }\r\n\r\n    const validate = (validate,id) => {\r\n        setLoadingStatus(id);\r\n        console.log(validate);\r\n        return PersApi.validateStatus(validate, id)\r\n        .then((res)=>{\r\n            /*const data = JSON.parse(localStorage.getItem(\"demandes\"))\r\n            if(data && data.user){\r\n                data.user.status = 1\r\n                localStorage.setItem(\"demandes\", JSON.stringify(data))\r\n            }*/\r\n            localStorage.removeItem(\"demandes\")\r\n        }).catch((err)=>{\r\n            errorModal(err)\r\n        }).finally(()=> {setLoadingStatus(-1);getAll();})\r\n    }\r\n\r\n    const getAll = () => {\r\n        const data = JSON.parse(localStorage.getItem(\"demandes\"))\r\n        if(data){\r\n            setLoading(false);\r\n            return setRows(data)\r\n        }\r\n        PersApi.getAllDemandes().then((res) => {\r\n            const { data } = res;\r\n            setRows(data);\r\n            localStorage.setItem(\"demandes\", JSON.stringify(data))\r\n        }).catch((err)=>{\r\n            localStorage.removeItem(\"demandes\")\r\n            errorModal(err)\r\n        }).finally(() => {\r\n            setLoading(false);\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        getAll();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n    \r\n\r\n    return (\r\n        <Aux>\r\n            <Row>\r\n                <Col>\r\n                    <Card className='Recent-Users'>\r\n                        <Card.Header>\r\n                            <Card.Title as='h5'>Liste des demandes d'activation d'un compte</Card.Title>\r\n                        </Card.Header>\r\n                        <Card.Body className='px-0 py-2'>\r\n                            <Table responsive hover>\r\n                                <tbody>\r\n                                    <tr>\r\n                                        <td>#</td>\r\n                                        <td>Utilisateur</td>\r\n                                        <td>Date d'envoi</td>\r\n                                        <td>Status</td>\r\n                                        <td>Options</td>\r\n                                    </tr>\r\n                                    {loading ? (\r\n                                        <tr className=\"unread text-center\">\r\n                                            <td colSpan={5}><Spinner animation=\"border\" role=\"status\"></Spinner></td> \r\n                                        </tr>\r\n                                    ) :\r\n                                    rows.length > 0 ?\r\n                                        rows.map((item) => (\r\n                                            <tr className=\"unread\" key={item.id} style={{\"cursor\":\"pointer\"}}>\r\n                                                <td><LazyLoadImage onError={defaultSrcImg} className=\"rounded-circle\" style={{width: '40px'}} src={ path + item.user.photo } alt=\"activity-user\"/></td>\r\n                                                <td>\r\n                                                    <h6 className=\"mb-1\">{item.user.nom} {item.user.prenom}</h6>\r\n                                                    <small className=\"m-0\">{item.user.email}</small>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <h6 className=\"text-muted\">{item.created_at}</h6>\r\n                                                </td>\r\n                                                <td>{(item.user.status !== 0 && (\r\n                                                    <h6 className=\"m-0 text-c-green\"><i className=\"fa fa-circle text-c-green f-10 m-r-15\"/> Activé </h6>\r\n                                                ) ) || (\r\n                                                    <h6 className=\"m-0 text-c-red\"><i className=\"fa fa-circle text-c-red f-10 m-r-15\"/> Non activé </h6>\r\n                                                )}</td>\r\n                                                <td>\r\n                                                {(loadingStatus === item.id && (\r\n                                                    <button className=\"theme-bg-btn blue\" disabled> En cours ... </button>\r\n                                                )) || (\r\n                                                    (item.user.status === 0 && (<button className=\"theme-bg-btn blue\" onClick={() => validate(item.user.status === 0,item.user.id)}>Valider</button>))\r\n                                                    ||\r\n                                                    (<button className=\"theme-bg-btn red\" onClick={() => validate(item.user.status === 0,item.user.id)}>Dévalider</button>)\r\n                                                )}\r\n                                                </td>\r\n                                            </tr>\r\n                                        )) : (\r\n                                            <tr className=\"unread text-center\">\r\n                                                <td colSpan={5}>Aucune résultat</td> \r\n                                            </tr>\r\n                                        )}\r\n                                </tbody>\r\n                            </Table>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </Aux>\r\n    );\r\n}\r\n\r\nexport default Demande;","import Axios from \"axios\";\r\nimport { API_SERVER } from \"../config/constant\";\r\n// import swal from \"sweetalert2\";\r\n\r\nconst user = JSON.parse(localStorage.getItem(\"user\"));\r\nconst token = user !== null ? user.token : \"\";\r\nconst axios = Axios.create({\r\n  baseURL: `${API_SERVER}`,\r\n  headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\r\n});\r\n\r\n/*axios.interceptors.request.use(\r\n  (config) => {\r\n    // trigger 'loading=true' event here\r\n    // if (config.url !== `/sanctum/csrf-cookie`) {\r\n    swal.fire({\r\n      title: \"Veuillez patientez\",\r\n      imageUrl: `${API_SERVER}loading2.gif`,\r\n      imageWidth: 50,\r\n      imageHeight: 50,\r\n      imageAlt: \"Attendre\",\r\n      allowOutsideClick: false,\r\n      showConfirmButton: false,\r\n    });\r\n    // }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    // trigger 'loading=false' event here\r\n    swal.close();\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\naxios.interceptors.response.use(\r\n  (response) => {\r\n    // trigger 'loading=false' event here\r\n    swal.close();\r\n    return response;\r\n  },\r\n  (error) => {\r\n    // trigger 'loading=false' event here\r\n    swal.close();\r\n    return Promise.reject(error);\r\n  }\r\n);*/\r\n\r\nexport default axios;\r\n","import Swal from 'sweetalert2';\r\nimport 'animate.css';\r\n\r\nconst Toast = () => {\r\n    return Swal.mixin({\r\n        toast: true,\r\n        showConfirmButton: false,\r\n        customClass : { container: 'ml-popup', popup : 'hover-popup'},\r\n        showClass: {\r\n            popup: 'animate__animated animate__fadeInDown'\r\n        },\r\n        hideClass: {\r\n            popup: 'animate__animated animate__fadeOutDown'\r\n        }\r\n    })\r\n}\r\n\r\nconst deleteModal = () => {\r\n    return Swal.mixin({\r\n        // toast: true,\r\n        backdrop : true,\r\n        title : 'Attention',\r\n        text: 'Voulez vous vraiment supprimer ?',\r\n        icon: 'warning',\r\n        buttonsStyling: false,\r\n        customClass : { \r\n            popup : 'swal-sm', \r\n            confirmButton : 'btn btn-danger btn-sm',\r\n            cancelButton : 'btn btn-secondary btn-sm'\r\n        },\r\n        confirmButtonText : 'Confirmer', \r\n        cancelButtonText : 'Annuler', \r\n        showCancelButton: true,\r\n        allowOutsideClick: false,\r\n        allowEscapeKey: false,\r\n        showLoaderOnConfirm: true,\r\n    })\r\n}\r\n\r\nconst errorModal = (err) => {\r\n    if (err.response.data) {\r\n        Toast().fire({title: err.response.data.message, icon:'error'})\r\n    } else Toast().fire({\r\n        title: \"Erreur survenue au serveur\",\r\n        html : `Veuillez contacter l'administrateur`,\r\n        icon:'error'\r\n    })\r\n}\r\n\r\n/*const errorModal = (err) => {\r\n    const modal = Swal.mixin({\r\n        icon: 'error',\r\n        buttonsStyling: false,\r\n        customClass : { popup : 'swal-sm', confirmButton : 'btn btn-danger' }\r\n    });\r\n    if (err.response.data) {\r\n        modal.fire({html: err.response.data.message})\r\n    } else modal.fire({html: \"Erreur survenue au serveur <br/> Veuillez contacter l'administrateur.\"})\r\n}*/\r\n\r\nexport { deleteModal, errorModal ,Toast } \r\n","import axios from \"./index\";\r\n\r\nclass PersApi {\r\n  static getAll = () => {\r\n    return axios.get(`${base}`);\r\n  };\r\n\r\n  static getAllDemandes = () => {\r\n    return axios.get(`api/users/demandes`);\r\n  };\r\n\r\n  static validateStatus = (validate, id) => {\r\n    if(validate) return axios.get(`api/users/validate/${id}`);\r\n    else return axios.get(`api/users/unvalidate/${id}`);\r\n  };\r\n\r\n  static unValidateStatus = (id) => {\r\n    return axios.get(`api/users/unvalidate/${id}`);\r\n  };\r\n\r\n  static add = (data) => {\r\n    return axios.post(`${base}`, data);\r\n  };\r\n\r\n  static delete = (id) => {\r\n    return axios.delete(`${base}/${id}`);\r\n  };\r\n\r\n  static update = (data,id) => {\r\n    return axios.put(`${base}/${id}`, data);\r\n    // return axios.put(`${base}/${id}`, data);\r\n  };\r\n}\r\n\r\n// let base = \"api/users\";\r\nlet base = \"api/personnels\";\r\n\r\nexport default PersApi;\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"];\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;"],"sourceRoot":""}