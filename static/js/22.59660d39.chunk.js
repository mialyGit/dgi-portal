(this["webpackJsonpdgi-portal"]=this["webpackJsonpdgi-portal"]||[]).push([[22],{184:function(e,a,t){"use strict";t.r(a);var n=t(30),l=t(3),r=t(29),c=t(0),i=t.n(c),o=t(2),p=t(11),s=t(97),m=t(76),u=t(104),d=t(105),b=t(77),f=t(136),E=t(99),v=t(149),h=t(98),_=t(54),g=t(60),O=t(28),j=t(72);a.default=function(){var e=Object(o.h)(),a=Object(o.g)(),t=_.a+"storage/",y=Object(c.useRef)(),N=Object(c.useState)({id:0,code_app:"",nom_app:"",abrev_app:"",desc_app:"",lien_app:"https://",type_app:0,file:""}),C=Object(r.a)(N,2),x=C[0],z=C[1],k=Object(c.useState)({}),S=Object(r.a)(k,2),w=S[0],L=S[1],A=Object(c.useState)(!1),T=Object(r.a)(A,2),B=T[0],V=T[1],F=Object(c.useState)(void 0),G=Object(r.a)(F,2),I=G[0],D=G[1],P=Object(c.useState)({}),R=Object(r.a)(P,2),J=R[0],U=R[1],W=Object(c.useState)(0),H=Object(r.a)(W,2),K=H[0],M=H[1],q=Object(c.useState)(_.b+"/no-import.png"),Q=Object(r.a)(q,2),X=Q[0],Y=Q[1],Z=Object(c.useState)({color:"text-muted",text:"Veuillez importer une ic\xf4ne ici"}),$=Object(r.a)(Z,2),ee=$[0],ae=$[1],te=function(e){var a=e.target,t=a.name,r=a.value;z(Object(l.a)(Object(l.a)({},x),{},Object(n.a)({},t,r))),L(Object(l.a)(Object(l.a)({},w),{},Object(n.a)({},t,r))),J[t]&&U(Object(l.a)(Object(l.a)({},J),{},Object(n.a)({},t,null)))},ne=function(e){var a=parseInt(e.target.value);z(Object(l.a)(Object(l.a)({},x),{},{type_app:a})),L(Object(l.a)(Object(l.a)({},w),{},{type_app:a}))};function le(e){setTimeout((function(){var a=parseInt(e.loaded/e.target.fileSize*100,10);if(M(a),"loadend"===e.type){var t=e.target.result;ae({color:"text-muted",text:e.target.fileName}),Y(t),z(Object(l.a)(Object(l.a)({},x),{},{file:t})),L(Object(l.a)(Object(l.a)({},w),{},{file:t})),console.log(e.target.result),setTimeout((function(){M(0)}),100)}}),500)}return Object(c.useEffect)((function(){!function(){if(e.state&&e.state.item){var n=e.state.item;n.abrev_app=n.abrev_app||"",n.desc_app=n.desc_app||"",n.logo_app.includes("default-logo")||(Y(t+n.logo_app),ae(Object(l.a)(Object(l.a)({},ee),{},{text:n.logo_app.split("/")[1]}))),z(Object(l.a)({},n))}else a.push("/apps")}()}),[]),i.a.createElement(O.a,null,i.a.createElement(s.a,null,i.a.createElement(m.a,null,i.a.createElement(u.a,{onSubmit:function(e){if(e.preventDefault(),D(void 0),Object.keys(w).length<=0)return a.push("/apps");V(!0);var t=function(){var e=x.code_app,a=x.nom_app,t=x.lien_app,n={};return e&&""!==e.trim()||(n.code_app="Veuillez entrer le code de l'application"),a&&""!==a.trim()||(n.nom_app="Veuillez entrer le nom de l'application"),t&&""!==t.trim()?t.trim().startsWith("http://")||t.trim().startsWith("https://")||(n.lien_app="Veuillez entrer une url valide"):n.lien_app="Veuillez entrer le lien vers l'application",n}();if(Object.keys(t).length>0)return V(!1),U(t);var n=Object(l.a)({},x);console.log(n),j.a.update(x.id,n).then((function(e){console.log(e),localStorage.removeItem("apps"),a.push("/apps")})).catch((function(e){e.response.data?D(e.response.data.message):D("Erreur survenue au serveur \n Veuillez contacter l'administrateur."),V(!1)}))}},i.a.createElement(d.a,null,i.a.createElement(d.a.Header,null,i.a.createElement(d.a.Title,{as:"h5"}," Modifier une application ")),i.a.createElement(d.a.Body,null,i.a.createElement(s.a,null,i.a.createElement(m.a,{md:2},i.a.createElement(d.a,{onClick:function(){return y.current.click()}},i.a.createElement(d.a.Img,{style:{height:"100%"},variant:"top",src:X,alt:"activity-user"}),i.a.createElement("small",{className:"mt-3 text-center ".concat(ee.color)},ee.text),i.a.createElement(b.a,{type:"file",id:"logo_app",name:"logo_app",accept:"image/*",ref:y,onChange:function(e){var a=e.target.files[0];if(a){var t=a.name.split(".").pop().toLowerCase();if(["jpg","jpeg","png"].indexOf(t)>-1){var n=new FileReader;n.fileName=a.name,n.fileSize=a.size,function(e){e.addEventListener("loadstart",le),e.addEventListener("load",le),e.addEventListener("loadend",le),e.addEventListener("progress",le),e.addEventListener("error",le),e.addEventListener("abort",le)}(n),n.readAsDataURL(a)}else ae({color:"text-danger",text:"Fichier invalide!"})}},hidden:!0})),i.a.createElement(f.a,{className:0===K&&"d-none",animated:!0,now:K})),i.a.createElement(m.a,null),i.a.createElement(m.a,{md:8},i.a.createElement(u.a.Group,{as:s.a,className:"mb-3"},i.a.createElement(u.a.Label,{column:!0,sm:3},"Code Application "),i.a.createElement(m.a,null,i.a.createElement(E.a,{size:"sm",id:"inputGroup-nom"},i.a.createElement(E.a.Prepend,null,i.a.createElement(E.a.Text,null,i.a.createElement("i",{className:"feather icon-user"}))),i.a.createElement(b.a,{className:J.code_app&&"is-invalid",id:"code_app",name:"code_app",placeholder:"Code Application",value:x.code_app,onChange:te}),i.a.createElement(b.a.Feedback,{type:"invalid",className:"text-right"},J.code_app)))),i.a.createElement(u.a.Group,{as:s.a,className:"mb-3"},i.a.createElement(u.a.Label,{column:!0,sm:3},"Nom de l'application "),i.a.createElement(m.a,null,i.a.createElement(E.a,{size:"sm"},i.a.createElement(E.a.Prepend,null,i.a.createElement(E.a.Text,null,i.a.createElement("i",{className:"feather icon-user"}))),i.a.createElement(b.a,{className:J.nom_app&&"is-invalid",id:"nom_app",name:"nom_app",placeholder:"Nom de l'application",value:x.nom_app,onChange:te}),i.a.createElement(b.a.Feedback,{type:"invalid",className:"text-right"},J.nom_app)))),i.a.createElement(u.a.Group,{as:s.a,className:"mb-3"},i.a.createElement(u.a.Label,{column:!0,sm:3},"Abr\xe9viation "),i.a.createElement(m.a,null,i.a.createElement(E.a,{size:"sm"},i.a.createElement(E.a.Prepend,null,i.a.createElement(E.a.Text,null,i.a.createElement("i",{className:"feather icon-user"}))),i.a.createElement(b.a,{id:"abrev_app",name:"abrev_app",placeholder:"Abr\xe9viation",value:x.abrev_app,onChange:te})))),i.a.createElement(u.a.Group,{as:s.a,className:"mb-3"},i.a.createElement(u.a.Label,{column:!0,sm:3}," Type d'application "),i.a.createElement(m.a,{className:"mt-2"},i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{name:"type_app",type:"radio",id:"type_app_0",className:"form-check-input",value:"0",style:{cursor:"pointer"},checked:0===x.type_app,onChange:ne}),i.a.createElement("label",{title:"",htmlFor:"type_app_0",className:"form-check-label",style:{cursor:"pointer"}},"Application par d\xe9faut"))),i.a.createElement(m.a,{className:"mt-2"},i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{name:"type_app",type:"radio",id:"type_app_1",className:"form-check-input",value:"1",style:{cursor:"pointer"},checked:1===x.type_app,onChange:ne}),i.a.createElement("label",{title:"",htmlFor:"type_app_1",className:"form-check-label",style:{cursor:"pointer"}},"Application privilegi\xe9e")))))),i.a.createElement(s.a,null,i.a.createElement(m.a,{md:6},i.a.createElement(u.a.Group,{className:"mb-3"},i.a.createElement(u.a.Label,null,"Description "),i.a.createElement(u.a.Control,{as:"textarea",rows:"5",id:"desc_app",name:"desc_app",value:x.desc_app,onChange:te}))),i.a.createElement(m.a,{md:6},i.a.createElement(u.a.Group,{className:"mb-3"},i.a.createElement(u.a.Label,null,"Lien "),i.a.createElement(u.a.Control,{className:J.lien_app&&"is-invalid",as:"textarea",rows:"1",id:"lien_app",name:"lien_app",value:x.lien_app,onChange:te}),i.a.createElement(b.a.Feedback,{type:"invalid",className:"text-right"},J.lien_app)),I&&i.a.createElement("p",{className:"text-danger form-text m-3"},I),B&&i.a.createElement(v.a,{variant:"primary",size:"sm",className:"pull-right mt-2",disabled:!0},i.a.createElement(h.a,{as:"span",className:"mr-2",size:"sm",animation:"border",role:"status","aria-hidden":"true"}),"Veuillez patientez ...")||i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{className:"mt-2",variant:"danger",size:"sm",onClick:function(e){e.preventDefault(),Object(g.b)().fire({preConfirm:function(){return Object(g.b)().getCancelButton().setAttribute("style","display:none"),localStorage.removeItem("apps"),j.a.delete(x.id).then((function(e){return console.log(e),a.push("/apps")})).catch((function(e){Object(g.b)().close(),setTimeout((function(){return Object(g.c)(e)}),500)}))}})}},i.a.createElement("i",{className:"feather icon-trash"}),"Supprimer"),i.a.createElement("div",{className:"pull-right mt-2"},i.a.createElement(p.b,{to:"/apps"},i.a.createElement(v.a,{variant:"secondary",size:"sm"},i.a.createElement("i",{className:"feather icon-x-circle"}),"Annuler")),i.a.createElement(v.a,{type:"submit",size:"sm",variant:"primary"},i.a.createElement("i",{className:"feather icon-save"}),"Sauvegarder")))))))))))}},56:function(e,a,t){"use strict";var n=t(61),l=t.n(n),r=t(54),c=JSON.parse(localStorage.getItem("user")),i=null!==c?c.token:"",o=l.a.create({baseURL:"".concat(r.a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)}});a.a=o},60:function(e,a,t){"use strict";t.d(a,"b",(function(){return c})),t.d(a,"c",(function(){return i})),t.d(a,"a",(function(){return r}));var n=t(67),l=t.n(n),r=(t(68),function(){return l.a.mixin({toast:!0,showConfirmButton:!1,customClass:{container:"ml-popup",popup:"hover-popup"},showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"}})}),c=function(){return l.a.mixin({backdrop:!0,title:"Attention",text:"Voulez vous vraiment supprimer ?",icon:"warning",buttonsStyling:!1,customClass:{popup:"swal-sm",confirmButton:"btn btn-danger btn-sm",cancelButton:"btn btn-secondary btn-sm"},confirmButtonText:"Confirmer",cancelButtonText:"Annuler",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,showLoaderOnConfirm:!0})},i=function(e){e.response.data?r().fire({title:e.response.data.message,icon:"error"}):r().fire({title:"Erreur survenue au serveur",html:"Veuillez contacter l'administrateur",icon:"error"})}},72:function(e,a,t){"use strict";var n=t(15),l=t(14),r=t(56),c=Object(n.a)((function e(){Object(l.a)(this,e)}));c.getAll=function(){return r.a.get("".concat(i))},c.delete=function(e){return r.a.delete("".concat(i,"/").concat(e))},c.update=function(e,a){return r.a.post("".concat(i,"/").concat(e,"?_method=PUT"),a)},c.add=function(e){return r.a.post("".concat(i),e)};var i="api/applications";a.a=c}}]);
//# sourceMappingURL=22.59660d39.chunk.js.map