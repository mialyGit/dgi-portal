{"version":3,"sources":["../node_modules/react-bootstrap/esm/Table.js","components/Administrateur/Utilisateur/details.js","utils/index.js","components/Common/SweetModal.js","utils/privilege.js"],"names":["_excluded","Table","React","forwardRef","_ref","ref","bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive","props","_objectWithoutPropertiesLoose","decoratedBsPrefix","useBootstrapPrefix","classes","classNames","table","createElement","_extends","responsiveClass","UserDetails","location","useLocation","history","useHistory","path","API_SERVER","useState","preview","setPreview","color","text","uploadMessage","setUploadMessage","user","setUser","rows","setRows","loading","setLoading","defaultSrcImg","e","target","src","basename","setDefaultValues","state","item","photo","includes","split","id","newValue","Toast","fire","console","log","replace","PrivilegeApi","get","then","res","data","catch","err","errorModal","finally","push","useEffect","Header","Title","as","Body","md","Img","onError","style","height","alt","nom","prenom","telephone","adresse","colSpan","animation","role","length","map","key","code_app","width","logo_app","nom_app","nom_privilege","desc_app","JSON","parse","localStorage","getItem","token","axios","Axios","create","baseURL","headers","Authorization","Swal","mixin","toast","showConfirmButton","customClass","container","popup","showClass","hideClass","deleteModal","backdrop","title","icon","buttonsStyling","confirmButton","cancelButton","confirmButtonText","cancelButtonText","showCancelButton","allowOutsideClick","allowEscapeKey","showLoaderOnConfirm","response","message","html","getAll","base","add","post","delete","update","put"],"mappings":"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","file":"static/js/14.61be33b7.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"];\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","import React,{ useState, useEffect } from 'react'\r\nimport { useHistory, useLocation} from 'react-router-dom'\r\nimport {Table, Row, Col, Card, Spinner } from 'react-bootstrap';\r\nimport { errorModal, Toast } from \"../../Common/SweetModal\"\r\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\r\nimport { API_SERVER, basename } from \"config/constant\";\r\nimport Aux from \"hoc/_Aux\";\r\nimport PrivilegeApi from 'utils/privilege';\r\n\r\nconst UserDetails = () => {\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const path = API_SERVER + 'storage/';\r\n    const [preview, setPreview] = useState();\r\n    const [uploadMessage, setUploadMessage] = useState({\r\n        color : \"text-muted\",\r\n        text : \"Veuillez importer une icône ici\"\r\n    });\r\n\r\n    const [user, setUser] = useState({})\r\n    const [rows, setRows] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    \r\n    const defaultSrcImg = (e) => {\r\n        /*const mode = e.target.id\r\n        mode === \"edit_mode\" ? e.target.src = basename + \"/default-icon.png\" :*/\r\n        e.target.src = basename + \"/user-icon-default.png\";\r\n    }\r\n\r\n    const getAll = (id) => {\r\n        if(location.state && location.state.newValue){\r\n            Toast().fire('Privilège modifié avec succès','','success');\r\n            console.log(location.state.newValue);\r\n            history.replace()\r\n        }\r\n\r\n        /*const data = JSON.parse(localStorage.getItem(\"users_privileges\"))\r\n        if(data){\r\n            setLoading(false);\r\n            return setRows(data)\r\n        }*/\r\n\r\n        PrivilegeApi.get(id).then((res) => {\r\n            const { data } = res;\r\n            setRows(data);\r\n            //localStorage.setItem(\"users_privileges\", JSON.stringify(data))\r\n        }).catch((err)=>{\r\n            //localStorage.removeItem(\"users_privileges\")\r\n            errorModal(err)\r\n        }).finally(() => {\r\n            setLoading(false);\r\n        });\r\n    };\r\n\r\n    const setDefaultValues = () => {\r\n        if(location.state && location.state.item){\r\n            let item =  location.state.item;\r\n            if(!item.photo.includes('default-icon')){\r\n                setPreview(path + item.photo)\r\n                setUploadMessage({...uploadMessage, text: item.photo.split('/')[1]})\r\n            }\r\n            setUser({...item});\r\n            getAll(item.id)\r\n        } else {\r\n            history.push('/users')\r\n        }\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        setDefaultValues();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    return (\r\n        <Aux>\r\n            <Row>\r\n                <Col>\r\n                    <Card>\r\n                        <Card.Header>\r\n                            <Card.Title as=\"h5\"> Information sur l'utilisateur </Card.Title>\r\n                        </Card.Header>\r\n                        <Card.Body>\r\n                            <Row>\r\n                                <Col md={2}>\r\n                                    <Card>\r\n                                        <Card.Img id=\"show_mode\" onError={defaultSrcImg} style={{ height : '100%' }} variant=\"top\" src={ preview } alt=\"activity-user\" />\r\n                                        <small className={`mt-3 text-center ${uploadMessage.color}`} >{uploadMessage.text}</small>\r\n                                    </Card>\r\n                                </Col>\r\n                                <Col></Col>\r\n                                <Col md={8}>\r\n                                    <Row className=\"mb-3\">\r\n                                        <Col><label className=\"mr-4\"> Nom  : </label><b>{user.nom}</b></Col>\r\n                                    </Row>\r\n                                    <Row className=\"mb-3\">\r\n                                        <Col><label className=\"mr-4\"> Prénom  : </label><b>{user.prenom}</b></Col>\r\n                                    </Row>\r\n                                    <Row className=\"mb-3\">\r\n                                        <Col><label className=\"mr-4\"> Téléphone  : </label><b>{user.telephone}</b></Col>\r\n                                    </Row>\r\n                                    <Row className=\"mb-3\">\r\n                                        <Col><label className=\"mr-4\"> Adresse  : </label><b>{user.adresse}</b></Col>\r\n                                    </Row>\r\n                                </Col>\r\n                            </Row>\r\n                            <Row>\r\n                                <Table responsive hover>\r\n                                    <tbody>\r\n                                        <tr>\r\n                                            <td>#</td>\r\n                                            <td>Application</td>\r\n                                            <td>Details</td>\r\n                                        </tr>\r\n                                        {loading ? (\r\n                                            <tr className=\"unread text-center\">\r\n                                                <td colSpan={4}><Spinner animation=\"border\" role=\"status\"></Spinner></td> \r\n                                            </tr>\r\n                                        ) :\r\n                                        rows.length > 0 ?\r\n                                            rows.map((item) => (\r\n                                                <tr className=\"unread\" key={item.code_app}>\r\n                                                    <td><LazyLoadImage onError={defaultSrcImg} className=\"rounded-circle\" style={{width: '40px'}} src={ path + item.logo_app } alt=\"activity-user\"/></td>\r\n                                                    <td>\r\n                                                        <h6 className=\"mb-1\">{item.nom_app}</h6>\r\n                                                        <small className=\"m-0\">{item.nom_privilege}</small>\r\n                                                    </td>\r\n                                                    <td>\r\n                                                        <h6 className=\"text-muted\"><i className=\"fa fa-circle text-c-green f-10 m-r-15\"/>{item.desc_app}</h6>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            )) : (\r\n                                                <tr className=\"unread text-center\">\r\n                                                    <td colSpan={4}>Aucun privilège aux applcations de DGI</td> \r\n                                                </tr>\r\n                                            )}\r\n                                    </tbody>\r\n                                    </Table>\r\n                                </Row>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </Aux>\r\n    )\r\n    }\r\n\r\nexport default UserDetails;","import Axios from \"axios\";\r\nimport { API_SERVER } from \"../config/constant\";\r\n// import swal from \"sweetalert2\";\r\n\r\nconst user = JSON.parse(localStorage.getItem(\"user\"));\r\nconst token = user !== null ? user.token : \"\";\r\nconst axios = Axios.create({\r\n  baseURL: `${API_SERVER}`,\r\n  headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\r\n});\r\n\r\n/*axios.interceptors.request.use(\r\n  (config) => {\r\n    // trigger 'loading=true' event here\r\n    // if (config.url !== `/sanctum/csrf-cookie`) {\r\n    swal.fire({\r\n      title: \"Veuillez patientez\",\r\n      imageUrl: `${API_SERVER}loading2.gif`,\r\n      imageWidth: 50,\r\n      imageHeight: 50,\r\n      imageAlt: \"Attendre\",\r\n      allowOutsideClick: false,\r\n      showConfirmButton: false,\r\n    });\r\n    // }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    // trigger 'loading=false' event here\r\n    swal.close();\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\naxios.interceptors.response.use(\r\n  (response) => {\r\n    // trigger 'loading=false' event here\r\n    swal.close();\r\n    return response;\r\n  },\r\n  (error) => {\r\n    // trigger 'loading=false' event here\r\n    swal.close();\r\n    return Promise.reject(error);\r\n  }\r\n);*/\r\n\r\nexport default axios;\r\n","import Swal from 'sweetalert2';\r\nimport 'animate.css';\r\n\r\nconst Toast = () => {\r\n    return Swal.mixin({\r\n        toast: true,\r\n        showConfirmButton: false,\r\n        customClass : { container: 'ml-popup', popup : 'hover-popup'},\r\n        showClass: {\r\n            popup: 'animate__animated animate__fadeInDown'\r\n        },\r\n        hideClass: {\r\n            popup: 'animate__animated animate__fadeOutDown'\r\n        }\r\n    })\r\n}\r\n\r\nconst deleteModal = () => {\r\n    return Swal.mixin({\r\n        // toast: true,\r\n        backdrop : true,\r\n        title : 'Attention',\r\n        text: 'Voulez vous vraiment supprimer ?',\r\n        icon: 'warning',\r\n        buttonsStyling: false,\r\n        customClass : { \r\n            popup : 'swal-sm', \r\n            confirmButton : 'btn btn-danger btn-sm',\r\n            cancelButton : 'btn btn-secondary btn-sm'\r\n        },\r\n        confirmButtonText : 'Confirmer', \r\n        cancelButtonText : 'Annuler', \r\n        showCancelButton: true,\r\n        allowOutsideClick: false,\r\n        allowEscapeKey: false,\r\n        showLoaderOnConfirm: true,\r\n    })\r\n}\r\n\r\nconst errorModal = (err) => {\r\n    if (err.response.data) {\r\n        Toast().fire({title: err.response.data.message, icon:'error'})\r\n    } else Toast().fire({\r\n        title: \"Erreur survenue au serveur\",\r\n        html : `Veuillez contacter l'administrateur`,\r\n        icon:'error'\r\n    })\r\n}\r\n\r\n/*const errorModal = (err) => {\r\n    const modal = Swal.mixin({\r\n        icon: 'error',\r\n        buttonsStyling: false,\r\n        customClass : { popup : 'swal-sm', confirmButton : 'btn btn-danger' }\r\n    });\r\n    if (err.response.data) {\r\n        modal.fire({html: err.response.data.message})\r\n    } else modal.fire({html: \"Erreur survenue au serveur <br/> Veuillez contacter l'administrateur.\"})\r\n}*/\r\n\r\nexport { deleteModal, errorModal ,Toast } \r\n","import axios from \"./index\";\r\n\r\nclass PrivilegeApi {\r\n  static getAll = () => {\r\n    return axios.get(`${base}`);\r\n  };\r\n\r\n  static get = (id) => {\r\n    return axios.get(`${base}/${id}`);\r\n  };\r\n\r\n  static add = (data) => {\r\n    return axios.post(`${base}`, data);\r\n  };\r\n\r\n  static delete = (id) => {\r\n    return axios.delete(`${base}/${id}`);\r\n  };\r\n\r\n  static update = (data,id) => {\r\n    return axios.put(`${base}/${id}`, data);\r\n  };\r\n}\r\nlet base = \"api/user_privilege_apps\";\r\n\r\nexport default PrivilegeApi;\r\n"],"sourceRoot":""}