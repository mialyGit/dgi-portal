{"version":3,"sources":["components/Authentication/Activation/index.js","config/constant.js","utils/index.js","utils/auth.js","assets/images/background.jpg"],"names":["Activation","background","require","useState","isContribuable","setIsContribuable","nif","setNif","undefined","error","setError","success","setSuccess","loading","setLoading","className","onSubmit","event","preventDefault","AuthApi","Activate","then","res","console","log","catch","err","response","data","message","finally","name","type","id","value","style","checked","onChange","title","htmlFor","placeholder","target","disabled","role","aria-hidden","to","src","alt","API_SERVER","basename","user","JSON","parse","localStorage","getItem","token","axios","Axios","create","baseURL","headers","Authorization","Login","post","base","Register","Logout","module","exports"],"mappings":"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","file":"static/js/18.4e451fc8.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nimport './../../../assets/scss/style.scss';\r\nimport Aux from \"../../../hoc/_Aux\";\r\nimport Breadcrumb from \"../../../App/layout/AdminLayout/Breadcrumb\";\r\nimport AuthApi from \"../../../utils/auth\";\r\n\r\nconst Activation = () => {\r\n\r\n    const background = require('../../../assets/images/background.jpg')\r\n\r\n    const [isContribuable, setIsContribuable] = useState(true);\r\n    const [nif, setNif] = useState(\"\");\r\n    const [error, setError] = useState(undefined);\r\n    const [success, setSuccess] = useState(undefined);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    // const styles = {\r\n    //     paperContainer: {\r\n    //         background: `no-repeat center center / cover`,\r\n    //         backgroundImage: `url(${background})`\r\n    //     }\r\n    // };\r\n\r\n    const login = (event) => {\r\n\r\n        setError(undefined)\r\n        setSuccess(undefined)\r\n        if (event) {\r\n          event.preventDefault();\r\n        }\r\n\r\n        if (nif === \"\") {\r\n            return setError(\"Veuillez entrer le NIF ou le N° Matricule\");\r\n        }\r\n\r\n        setLoading(true);\r\n        AuthApi.Activate(isContribuable,{\r\n            nif\r\n        }).then((res)=>{\r\n            console.log(res);\r\n            setSuccess(\"Demande envoyé avec succès\")\r\n        }).catch((err)=>{\r\n            if (err.response.data) {\r\n                setError(err.response.data.message);\r\n            } else setError(\"Erreur survenue au serveur \\n Veuillez contacter l'administrateur.\");\r\n        }).finally(()=>{\r\n            setLoading(false)\r\n        })\r\n    }\r\n\r\n    return(\r\n        <Aux>\r\n            <Breadcrumb/>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                        <div className=\"auth-wrapper\">\r\n                            <div className=\"auth-content\">\r\n                                <div className=\"auth-bg\">\r\n                                    <span className=\"r\"/>\r\n                                    <span className=\"r s\"/>\r\n                                    <span className=\"r s\"/>\r\n                                    <span className=\"r\"/>\r\n                                </div>\r\n                                <form onSubmit={login}>\r\n                                    <div className=\"card\">\r\n                                        <div className=\"card-body text-center\">\r\n                                            <div className=\"mb-4\">\r\n                                                <i className=\"feather icon-unlock auth-icon\"/>\r\n                                            </div>\r\n                                            <h3 className=\"mb-4\">Demande une activation du compte</h3>\r\n                                            <div className=\"row mb-4\">\r\n                                                <div className=\"form-check col\">\r\n                                                    <input name=\"is_contribuable\" type=\"radio\" id=\"is_contribuable_0\" className=\"form-check-input\" value={true} style={{\"cursor\":\"pointer\"}} checked={isContribuable}  onChange={()=>setIsContribuable(true)}/>\r\n                                                    <label title=\"\" htmlFor=\"is_contribuable_0\" className=\"form-check-label\" style={{\"cursor\":\"pointer\"}}>Contribuable</label>\r\n                                                </div>\r\n                                                <div className=\"form-check col\">\r\n                                                    <input name=\"is_contribuable\" type=\"radio\" id=\"is_contribuable_1\" className=\"form-check-input\" value={false} style={{\"cursor\":\"pointer\"}} checked={!isContribuable}  onChange={()=>setIsContribuable(false)}/>\r\n                                                    <label title=\"\" htmlFor=\"is_contribuable_1\" className=\"form-check-label\" style={{\"cursor\":\"pointer\"}}>Agent interne</label>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"input-group mb-3\">\r\n                                                {/* <span class=\"input-group-append bg-white border-right-0\">\r\n                                                    <span class=\"input-group-text\" style={{\"background\":\"#f4f7fa\",\"border-right\":\"0\"}}>\r\n                                                        <i class=\"fa fa-user fa-2x\"></i>\r\n                                                    </span>\r\n                                                </span> */}\r\n                                                <input \r\n                                                    type=\"text\" \r\n                                                    className=\"form-control\"\r\n                                                    name=\"nif\" \r\n                                                    placeholder=\"NIF ou N° MATRICULE\"\r\n                                                    onChange={(event) => {\r\n                                                        setNif(event.target.value);\r\n                                                        setError(undefined);\r\n                                                    }}\r\n                                                />\r\n                                            </div>\r\n                                            \r\n                                            {error && (\r\n                                                <p className=\"text-danger form-text mb-3\">{error}</p>\r\n                                            )}\r\n\r\n                                            {success && (\r\n                                                <p className=\"text-success form-text mb-3\">{success}</p>\r\n                                            )}\r\n\r\n                                            {loading ? (\r\n                                                <button className=\"btn btn-primary mb-4\" disabled>\r\n                                                        <span className=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                                    {' '} Connexion ...\r\n                                                </button>\r\n                                            ) : (\r\n                                                <button type=\"submit\" className=\"btn btn-primary shadow-2 mb-4\">Envoyer</button>\r\n                                            )}\r\n\r\n                                            <p className=\"mb-2 text-muted\">Connecter la portail <NavLink to=\"/\">Se connecter</NavLink></p>\r\n                                        </div>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>                   \r\n                    </div>\r\n                    \r\n                    <div className=\"col-md-6\">\r\n                    <div className=\"featured\">\r\n                        <h3 className=\"color-white\">Portail</h3>\r\n                        <h5>Accès des contribuables et des agents internes de la DGI.</h5>\r\n                    </div>\r\n                        <img src={background} alt=\"Logo DGI\" style={{\"width\" : \"100%\", \"height\":\"100%\"}} />\r\n                    </div>\r\n                </div>\r\n        </Aux>\r\n    );\r\n}\r\n\r\nexport default Activation;","//export const API_SERVER = \"http://localhost:8000/\";\r\nexport const API_SERVER = \"https://api-dgi-portal.herokuapp.com/\";\r\nexport const basename = \"/dgi-portal\";\r\n\r\n","import Axios from \"axios\";\r\nimport { API_SERVER } from \"../config/constant\";\r\n// import swal from \"sweetalert2\";\r\n\r\nconst user = JSON.parse(localStorage.getItem(\"user\"));\r\nconst token = user !== null ? user.token : \"\";\r\nconst axios = Axios.create({\r\n  baseURL: `${API_SERVER}`,\r\n  headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\r\n});\r\n\r\n/*axios.interceptors.request.use(\r\n  (config) => {\r\n    // trigger 'loading=true' event here\r\n    // if (config.url !== `/sanctum/csrf-cookie`) {\r\n    swal.fire({\r\n      title: \"Veuillez patientez\",\r\n      imageUrl: `${API_SERVER}loading2.gif`,\r\n      imageWidth: 50,\r\n      imageHeight: 50,\r\n      imageAlt: \"Attendre\",\r\n      allowOutsideClick: false,\r\n      showConfirmButton: false,\r\n    });\r\n    // }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    // trigger 'loading=false' event here\r\n    swal.close();\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\naxios.interceptors.response.use(\r\n  (response) => {\r\n    // trigger 'loading=false' event here\r\n    swal.close();\r\n    return response;\r\n  },\r\n  (error) => {\r\n    // trigger 'loading=false' event here\r\n    swal.close();\r\n    return Promise.reject(error);\r\n  }\r\n);*/\r\n\r\nexport default axios;\r\n","import axios from \"./index\";\r\n\r\nclass AuthApi {\r\n  static Login = (data) => {\r\n    return axios.post(`${base}/login`, data);\r\n  };\r\n\r\n  static Activate = (isContribuable,data) => {\r\n    if(isContribuable) return axios.post(`${base}/activate/cont`, data);\r\n    else return axios.post(`${base}/activate/pers`, data);\r\n  };\r\n\r\n  static Register = (data) => {\r\n    return axios.post(`${base}/register`, data);\r\n  };\r\n\r\n  static Logout = (data) => {\r\n    return axios.post(`${base}/logout`, data, {\r\n      headers: { Authorization: `Bearer ${data.token}` },\r\n    });\r\n  };\r\n}\r\n\r\nlet base = \"api/users\";\r\n\r\nexport default AuthApi;\r\n","module.exports = __webpack_public_path__ + \"static/media/background.95a52b00.jpg\";"],"sourceRoot":""}