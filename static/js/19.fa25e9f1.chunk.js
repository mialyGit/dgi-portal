(this["webpackJsonpdgi-portal"]=this["webpackJsonpdgi-portal"]||[]).push([[19],{496:function(e,t,a){"use strict";a.r(t);var n=a(3),c=a(29),r=a(0),s=a.n(r),l=a(2),o=a(11),i=(a(85),a(28)),m=a(81),u=a(75),p=a(18);t.default=function(){var e=a(95),t=Object(l.g)(),d=Object(p.b)().setUserSession,b=Object(r.useState)(""),E=Object(c.a)(b,2),h=E[0],v=E[1],f=Object(r.useState)(""),g=Object(c.a)(f,2),N=g[0],j=g[1],O=Object(r.useState)(!1),k=Object(c.a)(O,2),x=k[0],S=k[1],w=Object(r.useState)(void 0),y=Object(c.a)(w,2),V=y[0],z=y[1],A=Object(r.useState)(!1),C=Object(c.a)(A,2),L=C[0],D=C[1];return s.a.createElement(i.a,null,s.a.createElement(m.a,null),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-6"},s.a.createElement("div",{className:"auth-wrapper"},s.a.createElement("div",{className:"auth-content"},s.a.createElement("div",{className:"auth-bg"},s.a.createElement("span",{className:"r"}),s.a.createElement("span",{className:"r s"}),s.a.createElement("span",{className:"r s"}),s.a.createElement("span",{className:"r"})),s.a.createElement("form",{onSubmit:function(e){return z(void 0),e&&e.preventDefault(),""===h?z("Veuillez entrer l'email"):/\S+@\S+\.\S+/.test(h)?""===N?z("Veuillez entrer le mot de passe"):(D(!0),void u.a.Login({email:h,password:N}).then((function(e){var a=Object(n.a)({},e.data.user),c="/";return a.type_user_id?c="/apps":a.personnel?c="/personnels/apps":a.contribuable&&(c="/contribuables/apps"),a.token=e.data.token,a=JSON.stringify(a),d(a),localStorage.setItem("user",a),t.push(c)})).catch((function(e){e.response.data?z(e.response.data.message):z("Erreur survenue au serveur \n Veuillez contacter l'administrateur."),D(!1)}))):z("V\xe9rifier votre email si elle est bien valide")}},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-body text-center"},s.a.createElement("div",{className:"mb-4"},s.a.createElement("i",{className:"feather icon-unlock auth-icon"})),s.a.createElement("h3",{className:"mb-4"},"Authentification"),s.a.createElement("div",{className:"input-group mb-3"},s.a.createElement("input",{type:"email",className:"form-control",name:"email",placeholder:"Email",onChange:function(e){v(e.target.value),z(void 0)}})),s.a.createElement("div",{className:"input-group mb-3"},s.a.createElement("input",{type:x?"text":"password",className:"form-control",name:"password",placeholder:"password",onChange:function(e){j(e.target.value),z(void 0)}})),V&&s.a.createElement("p",{className:"text-danger form-text mb-3"},V),s.a.createElement("div",{className:"form-group-sm text-left mb-4"},s.a.createElement("div",{className:"checkbox checkbox-fill d-inline"},s.a.createElement("input",{type:"checkbox",name:"checkbox-fill-1",id:"checkbox-fill-a1"}),s.a.createElement("label",{htmlFor:"checkbox-fill-a1",className:"cr",onClick:function(){return S(!x)}}," Voir le mot de passe "))),L?s.a.createElement("button",{className:"btn btn-primary mb-4",disabled:!0},s.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})," "," Connexion ..."):s.a.createElement("button",{type:"submit",className:"btn btn-primary shadow-2 mb-4"},"Se connecter"),s.a.createElement("p",{className:"mb-2 text-muted"},"Mot de passe oubli\xe9 ? ",s.a.createElement(o.c,{to:"/reset-password"},"R\xe9initialiser")),s.a.createElement("p",{className:"mb-0 text-muted"},"Votre compte est-il activ\xe9 ? ",s.a.createElement(o.c,{to:"/activation"},"Demander une activation")))))))),s.a.createElement("div",{className:"col-md-6"},s.a.createElement("div",{className:"featured"},s.a.createElement("h3",{className:"color-white"},"Portail"),s.a.createElement("h5",null,"Acc\xe8s des contribuables et des agents internes de la DGI.")),s.a.createElement("img",{src:e,alt:"Logo DGI",style:{width:"100%",height:"100%"}}))))}},54:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c}));var n="https://api-dgi-portal.herokuapp.com/",c="/dgi-portal"},56:function(e,t,a){"use strict";var n=a(61),c=a.n(n),r=a(54),s=JSON.parse(localStorage.getItem("user")),l=null!==s?s.token:"",o=c.a.create({baseURL:"".concat(r.a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}});t.a=o},75:function(e,t,a){"use strict";var n=a(15),c=a(14),r=a(56),s=Object(n.a)((function e(){Object(c.a)(this,e)}));s.Login=function(e){return r.a.post("".concat(l,"/login"),e)},s.Activate=function(e,t){return e?r.a.post("".concat(l,"/activate/cont"),t):r.a.post("".concat(l,"/activate/pers"),t)},s.Register=function(e){return r.a.post("".concat(l,"/register"),e)},s.Logout=function(e){return r.a.post("".concat(l,"/logout"),e,{headers:{Authorization:"Bearer ".concat(e.token)}})};var l="api/users";t.a=s},95:function(e,t,a){e.exports=a.p+"static/media/background.95a52b00.jpg"}}]);
//# sourceMappingURL=19.fa25e9f1.chunk.js.map