(this["webpackJsonpdgi-portal"]=this["webpackJsonpdgi-portal"]||[]).push([[29],{183:function(e,a,t){"use strict";t.r(a);var n=t(30),l=t(3),r=t(29),c=t(0),i=t.n(c),p=t(2),m=t(11),s=t(97),o=t(76),u=t(104),d=t(105),E=t(77),b=t(136),v=t(99),h=t(149),g=t(98),_=t(28),f=t(72),N=t(54);a.default=function(){var e=Object(c.useRef)(),a=Object(p.g)(),t=Object(c.useState)({code_app:"",nom_app:"",abrev_app:"",desc_app:"",lien_app:"https://",type_app:0,file:""}),j=Object(r.a)(t,2),O=j[0],y=j[1],x=Object(c.useState)(!1),k=Object(r.a)(x,2),z=k[0],w=k[1],L=Object(c.useState)({}),C=Object(r.a)(L,2),S=C[0],A=C[1],T=Object(c.useState)(void 0),F=Object(r.a)(T,2),G=F[0],V=F[1],I=Object(c.useState)(0),P=Object(r.a)(I,2),R=P[0],D=P[1],J=Object(c.useState)(N.b+"/no-import.png"),U=Object(r.a)(J,2),B=U[0],W=U[1],H=Object(c.useState)({color:"text-muted",text:"Veuillez importer une ic\xf4ne ici"}),q=Object(r.a)(H,2),K=q[0],M=q[1],Q=Object(c.useState)("https://www.impots.mg"),X=Object(r.a)(Q,2),Y=X[0],Z=X[1],$=function(e){var a=e.target,t=a.name,r=a.value;y(Object(l.a)(Object(l.a)({},O),{},Object(n.a)({},t,r))),S[t]&&A(Object(l.a)(Object(l.a)({},S),{},Object(n.a)({},t,null)))},ee=function(e){var a=parseInt(e.target.value),t=e.target.getAttribute("data-link"),n=e.target.getAttribute("data-example");Z(n),y(Object(l.a)(Object(l.a)({},O),{},{type_app:a,lien_app:t}))};function ae(e){setTimeout((function(){var a=parseInt(e.loaded/e.target.fileSize*100,10);D(a),"loadend"===e.type&&(M({color:"text-muted",text:e.target.fileName}),W(e.target.result),y(Object(l.a)(Object(l.a)({},O),{},{file:e.target.result})),console.log(e.target.result),setTimeout((function(){D(0)}),100))}),500)}return i.a.createElement(_.a,null,i.a.createElement(s.a,null,i.a.createElement(o.a,null,i.a.createElement(u.a,{onSubmit:function(e){e.preventDefault(),w(!0),V(void 0);var t=function(){var e=O.code_app,a=O.nom_app,t=O.lien_app,n={};return e&&""!==e.trim()||(n.code_app="Veuillez entrer le code de l'application"),a&&""!==a.trim()||(n.nom_app="Veuillez entrer le nom de l'application"),t&&""!==t.trim()?t.trim().startsWith("http://")||t.trim().startsWith("https://")||(n.lien_app="Veuillez entrer une url valide"):n.lien_app="Veuillez entrer le lien vers l'application",n}();if(Object.keys(t).length>0)return w(!1),A(t);var n=Object(l.a)({},O);console.log(n),f.a.add(n).then((function(e){console.log(e),localStorage.removeItem("apps"),a.push("/apps")})).catch((function(e){e.response.data?V(e.response.data.message):V("Erreur survenue au serveur \n Veuillez contacter l'administrateur."),w(!1)}))}},i.a.createElement(d.a,null,i.a.createElement(d.a.Header,null,i.a.createElement(d.a.Title,{as:"h5"}," Ajouter une nouvelle application ")),i.a.createElement(d.a.Body,null,i.a.createElement(s.a,null,i.a.createElement(o.a,{md:2},i.a.createElement(d.a,{onClick:function(){return e.current.click()}},i.a.createElement(d.a.Img,{style:{height:"100%"},variant:"top",src:B,alt:"activity-user"}),i.a.createElement("small",{className:"mt-3 text-center ".concat(K.color)},K.text),i.a.createElement(E.a,{type:"file",id:"logo_app",name:"logo_app",accept:"image/*",ref:e,onChange:function(e){var a=e.target.files[0];if(a){var t=a.name.split(".").pop().toLowerCase();if(["jpg","jpeg","png"].indexOf(t)>-1){var n=new FileReader;n.fileName=a.name,n.fileSize=a.size,function(e){e.addEventListener("loadstart",ae),e.addEventListener("load",ae),e.addEventListener("loadend",ae),e.addEventListener("progress",ae),e.addEventListener("error",ae),e.addEventListener("abort",ae)}(n),n.readAsDataURL(a)}else M({color:"text-danger",text:"Fichier invalide!"})}},hidden:!0})),i.a.createElement(b.a,{className:0===R&&"d-none",animated:!0,now:R})),i.a.createElement(o.a,null),i.a.createElement(o.a,{md:8},i.a.createElement(u.a.Group,{as:s.a,className:"mb-3"},i.a.createElement(u.a.Label,{column:!0,sm:3},"Code Application "),i.a.createElement(o.a,null,i.a.createElement(v.a,{size:"sm",id:"inputGroup-nom"},i.a.createElement(v.a.Prepend,null,i.a.createElement(v.a.Text,null,i.a.createElement("i",{className:"feather icon-user"}))),i.a.createElement(E.a,{className:S.code_app&&"is-invalid",id:"code_app",name:"code_app",placeholder:"Code Application",value:O.code_app,onChange:$}),i.a.createElement(E.a.Feedback,{type:"invalid",className:"text-right"},S.code_app)))),i.a.createElement(u.a.Group,{as:s.a,className:"mb-3"},i.a.createElement(u.a.Label,{column:!0,sm:3},"Nom de l'application "),i.a.createElement(o.a,null,i.a.createElement(v.a,{size:"sm"},i.a.createElement(v.a.Prepend,null,i.a.createElement(v.a.Text,null,i.a.createElement("i",{className:"feather icon-user"}))),i.a.createElement(E.a,{className:S.nom_app&&"is-invalid",id:"nom_app",name:"nom_app",placeholder:"Nom de l'application",value:O.nom_app,onChange:$}),i.a.createElement(E.a.Feedback,{type:"invalid",className:"text-right"},S.nom_app)))),i.a.createElement(u.a.Group,{as:s.a,className:"mb-3"},i.a.createElement(u.a.Label,{column:!0,sm:3},"Abr\xe9viation "),i.a.createElement(o.a,null,i.a.createElement(v.a,{size:"sm"},i.a.createElement(v.a.Prepend,null,i.a.createElement(v.a.Text,null,i.a.createElement("i",{className:"feather icon-user"}))),i.a.createElement(E.a,{id:"abrev_app",name:"abrev_app",placeholder:"Abr\xe9viation",value:O.abrev_app,onChange:$})))),i.a.createElement(u.a.Group,{as:s.a,className:"mb-3"},i.a.createElement(u.a.Label,{column:!0,sm:3}," Type d'application "),i.a.createElement(o.a,{className:"mt-2"},i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{"data-example":"https://www.impots.mg","data-link":"https://",name:"type_app",type:"radio",id:"type_app_0",className:"form-check-input",value:"0",style:{cursor:"pointer"},checked:0===O.type_app,onChange:ee}),i.a.createElement("label",{title:"",htmlFor:"type_app_0",className:"form-check-label",style:{cursor:"pointer"}},"Application par d\xe9faut"))),i.a.createElement(o.a,{className:"mt-2"},i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{"data-example":"https://www.impots.mg","data-link":"https://",name:"type_app",type:"radio",id:"type_app_1",className:"form-check-input",value:"1",style:{cursor:"pointer"},checked:1===O.type_app,onChange:ee}),i.a.createElement("label",{title:"",htmlFor:"type_app_1",className:"form-check-label",style:{cursor:"pointer"}},"Application privilegi\xe9e")))))),i.a.createElement(s.a,null,i.a.createElement(o.a,{md:6},i.a.createElement(u.a.Group,{className:"mb-3"},i.a.createElement(u.a.Label,null,"Description "),i.a.createElement(u.a.Control,{as:"textarea",rows:"5",id:"desc_app",name:"desc_app",value:O.desc_app,onChange:$}))),i.a.createElement(o.a,{md:6},i.a.createElement(u.a.Group,{className:"mb-3"},i.a.createElement(u.a.Label,null,"Lien ",i.a.createElement("small",{className:"text-muted"},"(ex : ",Y,") ")," "),i.a.createElement(u.a.Control,{className:S.lien_app&&"is-invalid",as:"textarea",rows:"1",id:"lien_app",name:"lien_app",value:O.lien_app,onChange:$}),i.a.createElement(E.a.Feedback,{type:"invalid",className:"text-right"},S.lien_app)),G&&i.a.createElement("p",{className:"text-danger form-text m-3"},G),z&&i.a.createElement(h.a,{variant:"primary",className:"pull-right mt-2",disabled:!0},i.a.createElement(g.a,{as:"span",className:"mr-2",size:"sm",animation:"border",role:"status","aria-hidden":"true"}),"Veuillez patientez ...")||i.a.createElement("div",{className:"pull-right mt-2"},i.a.createElement(m.b,{to:"/apps"},i.a.createElement(h.a,{variant:"secondary",size:"sm"},i.a.createElement("i",{className:"feather icon-x-circle"}),"Annuler")),i.a.createElement(h.a,{type:"submit",variant:"primary",size:"sm"},i.a.createElement("i",{className:"feather icon-save"}),"Sauvegarder"))))))))))}},56:function(e,a,t){"use strict";var n=t(61),l=t.n(n),r=t(54),c=JSON.parse(localStorage.getItem("user")),i=null!==c?c.token:"",p=l.a.create({baseURL:"".concat(r.a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)}});a.a=p},72:function(e,a,t){"use strict";var n=t(15),l=t(14),r=t(56),c=Object(n.a)((function e(){Object(l.a)(this,e)}));c.getAll=function(){return r.a.get("".concat(i))},c.delete=function(e){return r.a.delete("".concat(i,"/").concat(e))},c.update=function(e,a){return r.a.post("".concat(i,"/").concat(e,"?_method=PUT"),a)},c.add=function(e){return r.a.post("".concat(i),e)};var i="api/applications";a.a=c}}]);
//# sourceMappingURL=29.2ab710de.chunk.js.map