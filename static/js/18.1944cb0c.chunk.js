(this["webpackJsonpdgi-portal"]=this["webpackJsonpdgi-portal"]||[]).push([[18],{488:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a(29),c=a(0),s=a.n(c),l=a(2),o=a(11),i=(a(88),a(28)),m=a(74),u=a(75),p=a(18);t.default=function(){var e=Object(l.g)(),t=Object(p.b)().setUserSession,a=Object(c.useState)(""),d=Object(r.a)(a,2),b=d[0],f=d[1],h=Object(c.useState)(""),E=Object(r.a)(h,2),v=E[0],g=E[1],N=Object(c.useState)(!1),j=Object(r.a)(N,2),O=j[0],S=j[1],k=Object(c.useState)(void 0),x=Object(r.a)(k,2),w=x[0],y=x[1],z=Object(c.useState)(!1),C=Object(r.a)(z,2),V=C[0],A=C[1];return s.a.createElement(i.a,null,s.a.createElement(m.a,null),s.a.createElement("div",{className:"auth-wrapper"},s.a.createElement("div",{className:"auth-content"},s.a.createElement("div",{className:"auth-bg"},s.a.createElement("span",{className:"r"}),s.a.createElement("span",{className:"r s"}),s.a.createElement("span",{className:"r s"}),s.a.createElement("span",{className:"r"})),s.a.createElement("form",{onSubmit:function(a){return y(void 0),a&&a.preventDefault(),""===b?y("Veuillez entrer l'email"):/\S+@\S+\.\S+/.test(b)?""===v?y("Veuillez entrer le mot de passe"):(A(!0),void u.a.Login({email:b,password:v}).then((function(a){console.log(a);var r=Object(n.a)({},a.data.user);return r.token=a.data.token,r=JSON.stringify(r),t(r),localStorage.setItem("user",r),e.push("/apps")})).catch((function(e){e.response.data?y(e.response.data.message):y("Erreur survenue au serveur \n Veuillez contacter l'administrateur."),A(!1)}))):y("V\xe9rifier votre email si elle est bien valide")}},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-body text-center"},s.a.createElement("div",{className:"mb-4"},s.a.createElement("i",{className:"feather icon-unlock auth-icon"})),s.a.createElement("h3",{className:"mb-4"},"Authentification"),s.a.createElement("div",{className:"input-group mb-3"},s.a.createElement("input",{type:"email",className:"form-control",name:"email",placeholder:"Email",onChange:function(e){f(e.target.value),y(void 0)}})),s.a.createElement("div",{className:"input-group mb-3"},s.a.createElement("input",{type:O?"text":"password",className:"form-control",name:"password",placeholder:"password",onChange:function(e){g(e.target.value),y(void 0)}})),w&&s.a.createElement("p",{className:"text-danger form-text mb-3"},w),s.a.createElement("div",{className:"form-group-sm text-left mb-4"},s.a.createElement("div",{className:"checkbox checkbox-fill d-inline"},s.a.createElement("input",{type:"checkbox",name:"checkbox-fill-1",id:"checkbox-fill-a1"}),s.a.createElement("label",{htmlFor:"checkbox-fill-a1",className:"cr",onClick:function(){return S(!O)}}," Voir le mot de passe "))),V?s.a.createElement("button",{className:"btn btn-primary mb-4",disabled:!0},s.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})," "," Connexion ..."):s.a.createElement("button",{type:"submit",className:"btn btn-primary shadow-2 mb-4"},"Se connecter"),s.a.createElement("p",{className:"mb-2 text-muted"},"Mot de passe oubli\xe9 ? ",s.a.createElement(o.c,{to:"/reset-password"},"R\xe9initialiser")),s.a.createElement("p",{className:"mb-0 text-muted"},"Avez vous d\xe9j\xe0 une compte ? ",s.a.createElement(o.c,{to:"/sign-up"},"S'inscrire"))))))))}},57:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n="http://localhost:8000/",r="/dgi-portal"},58:function(e,t,a){"use strict";var n=a(62),r=a.n(n),c=a(57),s=JSON.parse(localStorage.getItem("user")),l=null!==s?s.token:"",o=r.a.create({baseURL:"".concat(c.a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}});t.a=o},75:function(e,t,a){"use strict";var n=a(15),r=a(14),c=a(58),s=Object(n.a)((function e(){Object(r.a)(this,e)}));s.Login=function(e){return c.a.post("".concat(l,"/login"),e)},s.Register=function(e){return c.a.post("".concat(l,"/register"),e)},s.Logout=function(e){return c.a.post("".concat(l,"/logout"),e,{headers:{Authorization:"Bearer ".concat(e.token)}})};var l="api/users";t.a=s}}]);
//# sourceMappingURL=18.1944cb0c.chunk.js.map