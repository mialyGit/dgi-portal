(this["webpackJsonpdgi-portal"]=this["webpackJsonpdgi-portal"]||[]).push([[14],{105:function(e,a,t){"use strict";var n=t(1),r=t(5),c=t(52),l=t.n(c),i=t(0),s=t.n(i),o=t(53),u=t(66),m=function(e){return s.a.forwardRef((function(a,t){return s.a.createElement("div",Object(n.a)({},a,{ref:t,className:l()(a.className,e)}))}))},d=s.a.createContext(null);d.displayName="CardContext";var p=d,f=["bsPrefix","className","variant","as"],b=s.a.forwardRef((function(e,a){var t=e.bsPrefix,c=e.className,i=e.variant,u=e.as,m=void 0===u?"img":u,d=Object(r.a)(e,f),p=Object(o.a)(t,"card-img");return s.a.createElement(m,Object(n.a)({ref:a,className:l()(i?p+"-"+i:p,c)},d))}));b.displayName="CardImg",b.defaultProps={variant:null};var v=b,O=["bsPrefix","className","bg","text","border","body","children","as"],h=m("h5"),g=m("h6"),j=Object(u.a)("card-body"),E=Object(u.a)("card-title",{Component:h}),N=Object(u.a)("card-subtitle",{Component:g}),x=Object(u.a)("card-link",{Component:"a"}),y=Object(u.a)("card-text",{Component:"p"}),_=Object(u.a)("card-header"),S=Object(u.a)("card-footer"),z=Object(u.a)("card-img-overlay"),C=s.a.forwardRef((function(e,a){var t=e.bsPrefix,c=e.className,u=e.bg,m=e.text,d=e.border,f=e.body,b=e.children,v=e.as,h=void 0===v?"div":v,g=Object(r.a)(e,O),E=Object(o.a)(t,"card"),N=Object(i.useMemo)((function(){return{cardHeaderBsPrefix:E+"-header"}}),[E]);return s.a.createElement(p.Provider,{value:N},s.a.createElement(h,Object(n.a)({ref:a},g,{className:l()(c,E,u&&"bg-"+u,m&&"text-"+m,d&&"border-"+d)}),f?s.a.createElement(j,null,b):b))}));C.displayName="Card",C.defaultProps={body:!1},C.Img=v,C.Title=E,C.Subtitle=N,C.Body=j,C.Link=x,C.Text=y,C.Header=_,C.Footer=S,C.ImgOverlay=z;a.a=C},206:function(e,a,t){"use strict";t.r(a);var n=t(30),r=t(3),c=t(29),l=t(0),i=t.n(l),s=t(97),o=t(76),u=t(104),m=t(105),d=t(99),p=t(149),f=t(98),b=t(2),v=t(11),O=t(489),h=t(90),g=t(54),j=t(28),E=t(79);a.default=function(){var e=Object(b.g)(),a=g.a+"api/",t=Object(l.useState)({}),N=Object(c.a)(t,2),x=N[0],y=N[1],_=Object(l.useState)({user_id:0,application_id:0}),S=Object(c.a)(_,2),z=S[0],C=S[1],P=Object(l.useState)(!1),w=Object(c.a)(P,2),R=w[0],k=w[1],A=Object(l.useState)(void 0),G=Object(c.a)(A,2),I=G[0],L=G[1],V=Object(l.useState)([]),B=Object(c.a)(V,2),J=B[0],T=B[1],H=Object(O.b)({ignoreAccents:!0}),M=function(e){return{container:function(e){return Object(r.a)(Object(r.a)({},e),{},{flex:1})},control:function(a){return Object(r.a)(Object(r.a)({},a),x[e]&&{borderColor:"red"})}}},D=function(e){var a=e.target,t=a.name,c=a.value;C(Object(r.a)(Object(r.a)({},z),{},Object(n.a)({},t,c))),x[t]&&y(Object(r.a)(Object(r.a)({},x),{},Object(n.a)({},t,null)))},F=function(){var e=z.application_id,a=z.user_id,t=J,n={};return a&&0!==a||(n.user_id="Veuillez entrer l'utilisateur"),e&&0!==e||(n.application_id="Veuillez entrer l'application"),0===t.length&&(n.privileges="Veuillez entrer les privil\xe8ges assign\xe9s"),n};return i.a.createElement(j.a,null,i.a.createElement(s.a,null,i.a.createElement(o.a,null,i.a.createElement(u.a,{onSubmit:function(a){a.preventDefault(),L(void 0);var t=F();if(k(!0),Object.keys(t).length>0)k(!1),y(t);else{var n=J.map((function(e){return e.value})).join(","),c=Object(r.a)({},z);c.privilege_id=n,E.a.add(c).then((function(a){var t=JSON.parse(localStorage.getItem("contribuables")||"[]");if(0===t.length)return e.push({pathname:"/contribuables"});var n=t.find((function(e){return e.id===c.user_id}));return e.push({pathname:"/contribuables/details",state:{item:n}})})).catch((function(e){e.response.data?L(e.response.data.message):L("Erreur survenue au serveur \n Veuillez contacter l'administrateur."),k(!1)}))}}},i.a.createElement(m.a,null,i.a.createElement(m.a.Header,null,i.a.createElement(m.a.Title,{as:"h5"}," Ajouter un privilege ")),i.a.createElement(m.a.Body,null,i.a.createElement(s.a,null,i.a.createElement(o.a,{md:6},i.a.createElement(u.a.Group,{as:s.a,className:"mb-3"},i.a.createElement(u.a.Label,{column:!0,sm:4},"Selectionner l'utilisateur"),i.a.createElement(o.a,null,i.a.createElement(d.a,{size:"sm"},i.a.createElement(h.a,{cacheOptions:!0,filterOption:H,loadOptions:function(e,t){fetch("".concat(a,"contribuables")).then((function(e){return e.json()})).then((function(e){var a=[];e.forEach((function(e){a.push({label:"".concat(e.nom," ").concat(e.prenom),value:e.id,target:{name:"user_id",value:e.id}})})),t(a)}))},defaultOptions:!0,placeholder:"Selectionner l'utilisateur",styles:M("user_id"),onChange:D})),i.a.createElement("small",{className:"text-danger text-right"},x.user_id)))),i.a.createElement(o.a,{md:6},i.a.createElement(u.a.Group,{as:s.a,className:"mb-3"},i.a.createElement(u.a.Label,{className:"text-right",column:!0,sm:4},"Selectionner l'application"),i.a.createElement(o.a,null,i.a.createElement(d.a,{size:"sm"},i.a.createElement(h.a,{cacheOptions:!0,filterOption:H,loadOptions:function(e,t){fetch("".concat(a,"applications")).then((function(e){return e.json()})).then((function(e){var a=[];e.forEach((function(e){a.push({label:"".concat(e.abrev_app," - ").concat(e.nom_app),value:e.id,target:{name:"application_id",value:e.id}})})),t(a)}))},defaultOptions:!0,placeholder:"Selectionner l'application",styles:M("application_id"),onChange:D})),i.a.createElement("small",{className:"text-danger text-right"},x.application_id))))),i.a.createElement(u.a.Group,{as:s.a,className:"mb-3"},i.a.createElement(u.a.Label,{column:!0,sm:2},"Assigner au privil\xe8ge"),i.a.createElement(o.a,null,i.a.createElement(d.a,{size:"sm"},i.a.createElement(h.a,{isMulti:!0,cacheOptions:!0,filterOption:H,loadOptions:function(e,t){fetch("".concat(a,"privileges")).then((function(e){return e.json()})).then((function(e){var a=[];e.forEach((function(e){a.push({label:"".concat(e.nom_privilege),value:e.id,target:{name:"privilege_id",value:e.id}})})),t(a)}))},defaultOptions:!0,placeholder:"Selectionner le privil\xe8ge",styles:M("privileges"),onChange:function(e){T(e),x.privileges&&y(Object(r.a)(Object(r.a)({},x),{},{privileges:null}))}})),i.a.createElement("small",{className:"text-danger text-right"},x.privileges))),I&&i.a.createElement("p",{className:"text-danger form-text m-3"},I),R&&i.a.createElement(p.a,{variant:"primary",className:"pull-right mt-2",disabled:!0},i.a.createElement(f.a,{as:"span",className:"mr-2",size:"sm",animation:"border",role:"status","aria-hidden":"true"}),"Veuillez patientez ...")||i.a.createElement("div",{className:"pull-right mt-2"},i.a.createElement(v.b,{to:"/contribuables"},i.a.createElement(p.a,{variant:"secondary",size:"sm"},i.a.createElement("i",{className:"feather icon-x-circle"}),"Annuler")),i.a.createElement(p.a,{type:"submit",variant:"primary",size:"sm"},i.a.createElement("i",{className:"feather icon-save"}),"Sauvegarder"))))))))}},56:function(e,a,t){"use strict";var n=t(61),r=t.n(n),c=t(54),l=JSON.parse(localStorage.getItem("user")),i=null!==l?l.token:"",s=r.a.create({baseURL:"".concat(c.a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)}});a.a=s},76:function(e,a,t){"use strict";var n=t(1),r=t(5),c=t(52),l=t.n(c),i=t(0),s=t.n(i),o=t(53),u=["bsPrefix","className","as"],m=["xl","lg","md","sm","xs"],d=s.a.forwardRef((function(e,a){var t=e.bsPrefix,c=e.className,i=e.as,d=void 0===i?"div":i,p=Object(r.a)(e,u),f=Object(o.a)(t,"col"),b=[],v=[];return m.forEach((function(e){var a,t,n,r=p[e];if(delete p[e],"object"===typeof r&&null!=r){var c=r.span;a=void 0===c||c,t=r.offset,n=r.order}else a=r;var l="xs"!==e?"-"+e:"";a&&b.push(!0===a?""+f+l:""+f+l+"-"+a),null!=n&&v.push("order"+l+"-"+n),null!=t&&v.push("offset"+l+"-"+t)})),b.length||b.push(f),s.a.createElement(d,Object(n.a)({},p,{ref:a,className:l.a.apply(void 0,[c].concat(b,v))}))}));d.displayName="Col",a.a=d},79:function(e,a,t){"use strict";var n=t(15),r=t(14),c=t(56),l=Object(n.a)((function e(){Object(r.a)(this,e)}));l.getAll=function(){return c.a.get("".concat(i))},l.get=function(e){return c.a.get("".concat(i,"/").concat(e))},l.add=function(e){return c.a.post("".concat(i),e)},l.delete=function(e){return c.a.delete("".concat(i,"/").concat(e))},l.update=function(e,a){return c.a.put("".concat(i,"/").concat(a),e)};var i="api/user_privilege_apps";a.a=l},97:function(e,a,t){"use strict";var n=t(1),r=t(5),c=t(52),l=t.n(c),i=t(0),s=t.n(i),o=t(53),u=["bsPrefix","className","noGutters","as"],m=["xl","lg","md","sm","xs"],d=s.a.forwardRef((function(e,a){var t=e.bsPrefix,c=e.className,i=e.noGutters,d=e.as,p=void 0===d?"div":d,f=Object(r.a)(e,u),b=Object(o.a)(t,"row"),v=b+"-cols",O=[];return m.forEach((function(e){var a,t=f[e];delete f[e];var n="xs"!==e?"-"+e:"";null!=(a=null!=t&&"object"===typeof t?t.cols:t)&&O.push(""+v+n+"-"+a)})),s.a.createElement(p,Object(n.a)({ref:a},f,{className:l.a.apply(void 0,[c,b,i&&"no-gutters"].concat(O))}))}));d.displayName="Row",d.defaultProps={noGutters:!1},a.a=d},98:function(e,a,t){"use strict";var n=t(1),r=t(5),c=t(52),l=t.n(c),i=t(0),s=t.n(i),o=t(53),u=["bsPrefix","variant","animation","size","children","as","className"],m=s.a.forwardRef((function(e,a){var t=e.bsPrefix,c=e.variant,i=e.animation,m=e.size,d=e.children,p=e.as,f=void 0===p?"div":p,b=e.className,v=Object(r.a)(e,u),O=(t=Object(o.a)(t,"spinner"))+"-"+i;return s.a.createElement(f,Object(n.a)({ref:a},v,{className:l()(b,O,m&&O+"-"+m,c&&"text-"+c)}),d)}));m.displayName="Spinner",a.a=m}}]);
//# sourceMappingURL=14.8ce48099.chunk.js.map