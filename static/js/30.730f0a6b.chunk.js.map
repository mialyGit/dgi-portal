{"version":3,"sources":["components/Authentication/SignOut/index.js","utils/index.js","utils/auth.js"],"names":["SignOut","useAuth","userSession","setUserSession","useEffect","AuthApi","Logout","catch","err","console","log","finally","localStorage","clear","to","user","JSON","parse","getItem","token","axios","Axios","create","baseURL","API_SERVER","headers","Authorization","Login","data","post","base","Activate","isContribuable","Register"],"mappings":"iHAAA,kDA6BeA,UAxBC,WACZ,MAAuCC,cAAjCC,EAAN,EAAMA,YAAcC,EAApB,EAAoBA,eAkBpB,OAhBAC,qBAAU,WAGFC,IAAQC,OAAOJ,GACdK,OAAM,SAACC,GAAD,OAAQC,QAAQC,IAAIF,MAC1BG,SAAQ,WACLR,EAAe,IACfS,aAAaC,aAOvB,IAGE,kBAAC,IAAD,CAAUC,GAAG,Q,gCCzBrB,6BAIMC,EAAOC,KAAKC,MAAML,aAAaM,QAAQ,SACvCC,EAAiB,OAATJ,EAAgBA,EAAKI,MAAQ,GACrCC,EAAQC,IAAMC,OAAO,CACzBC,QAAQ,GAAD,OAAKC,KACZC,QAAS,CAAE,eAAgB,mBAAoBC,cAAc,UAAD,OAAYP,MAuC3DC,O,4DC7CTf,E,iDAAAA,EACGsB,MAAQ,SAACC,GACd,OAAOR,IAAMS,KAAN,UAAcC,EAAd,UAA4BF,IAFjCvB,EAKG0B,SAAW,SAACC,EAAeJ,GAChC,OAAGI,EAAuBZ,IAAMS,KAAN,UAAcC,EAAd,kBAAoCF,GAClDR,IAAMS,KAAN,UAAcC,EAAd,kBAAoCF,IAP9CvB,EAUG4B,SAAW,SAACL,GACjB,OAAOR,IAAMS,KAAN,UAAcC,EAAd,aAA+BF,IAXpCvB,EAcGC,OAAS,SAACsB,GACf,OAAOR,IAAMS,KAAN,UAAcC,EAAd,WAA6BF,EAAM,CACxCH,QAAS,CAAEC,cAAc,UAAD,OAAYE,EAAKT,WAK/C,IAAIW,EAAO,YAEIzB","file":"static/js/30.730f0a6b.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { useAuth } from \"../../../auth-context/auth.context\";\r\nimport AuthApi from \"../../../utils/auth\";\r\n\r\nconst SignOut = () => {\r\n    let { userSession , setUserSession } = useAuth();\r\n    \r\n    useEffect(()=>{\r\n\r\n        const handleLogout = () => {\r\n            AuthApi.Logout(userSession)\r\n            .catch((err)=> console.log(err))\r\n            .finally(()=>{\r\n                setUserSession({});\r\n                localStorage.clear();\r\n                // localStorage.removeItem(\"user\");\r\n            })\r\n        };\r\n    \r\n        handleLogout();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    },[])\r\n\r\n    return (\r\n        <Redirect to=\"/\" />\r\n    );\r\n}\r\n\r\nexport default SignOut;","import Axios from \"axios\";\r\nimport { API_SERVER } from \"../config/constant\";\r\n// import swal from \"sweetalert2\";\r\n\r\nconst user = JSON.parse(localStorage.getItem(\"user\"));\r\nconst token = user !== null ? user.token : \"\";\r\nconst axios = Axios.create({\r\n  baseURL: `${API_SERVER}`,\r\n  headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\r\n});\r\n\r\n/*axios.interceptors.request.use(\r\n  (config) => {\r\n    // trigger 'loading=true' event here\r\n    // if (config.url !== `/sanctum/csrf-cookie`) {\r\n    swal.fire({\r\n      title: \"Veuillez patientez\",\r\n      imageUrl: `${API_SERVER}loading2.gif`,\r\n      imageWidth: 50,\r\n      imageHeight: 50,\r\n      imageAlt: \"Attendre\",\r\n      allowOutsideClick: false,\r\n      showConfirmButton: false,\r\n    });\r\n    // }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    // trigger 'loading=false' event here\r\n    swal.close();\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\naxios.interceptors.response.use(\r\n  (response) => {\r\n    // trigger 'loading=false' event here\r\n    swal.close();\r\n    return response;\r\n  },\r\n  (error) => {\r\n    // trigger 'loading=false' event here\r\n    swal.close();\r\n    return Promise.reject(error);\r\n  }\r\n);*/\r\n\r\nexport default axios;\r\n","import axios from \"./index\";\r\n\r\nclass AuthApi {\r\n  static Login = (data) => {\r\n    return axios.post(`${base}/login`, data);\r\n  };\r\n\r\n  static Activate = (isContribuable,data) => {\r\n    if(isContribuable) return axios.post(`${base}/activate/cont`, data);\r\n    else return axios.post(`${base}/activate/pers`, data);\r\n  };\r\n\r\n  static Register = (data) => {\r\n    return axios.post(`${base}/register`, data);\r\n  };\r\n\r\n  static Logout = (data) => {\r\n    return axios.post(`${base}/logout`, data, {\r\n      headers: { Authorization: `Bearer ${data.token}` },\r\n    });\r\n  };\r\n}\r\n\r\nlet base = \"api/users\";\r\n\r\nexport default AuthApi;\r\n"],"sourceRoot":""}