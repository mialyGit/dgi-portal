(this["webpackJsonpdgi-portal"]=this["webpackJsonpdgi-portal"]||[]).push([[21],{102:function(e,t,a){"use strict";var n=a(15),r=a(14),c=a(56),l=Object(n.a)((function e(){Object(r.a)(this,e)}));l.getAll=function(){return c.a.get("".concat(s))},l.getAllDemandes=function(){return c.a.get("api/users/demandes")},l.add=function(e){return c.a.post("".concat(s),e)},l.delete=function(e){return c.a.delete("".concat(s,"/").concat(e))},l.update=function(e,t){return c.a.put("".concat(s,"/").concat(t),e)};var s="api/contribuables";t.a=l},484:function(e,t,a){"use strict";a.r(t);var n=a(29),r=a(0),c=a.n(r),l=a(97),s=a(76),o=a(105),i=a(149),u=a(89),m=a(98),d=a(2),b=a(11),p=a(71),f=a(102),E=a(54),h=a(60),v=a(28),g=a(84),O=a.n(g);t.default=function(){var e=Object(d.g)(),t=Object(d.h)(),a=E.a+"storage/",g=Object(r.useState)([]),N=Object(n.a)(g,2),j=N[0],y=N[1],w=Object(r.useState)(!0),C=Object(n.a)(w,2),S=C[0],x=C[1],_=function(e){e.target.src=O.a},A=function(){t.state&&t.state.newValue&&(Object(h.a)().fire("Utilisateur ajout\xe9 avec succ\xe8s","","success"),console.log(t.state.newValue),e.replace());var a=JSON.parse(localStorage.getItem("contribuables"));if(a)return x(!1),y(a);f.a.getAll().then((function(e){var t=e.data;y(t),localStorage.setItem("contribuables",JSON.stringify(t))})).catch((function(e){localStorage.removeItem("contribuables"),Object(h.c)(e)})).finally((function(){x(!1)}))};return Object(r.useEffect)((function(){A()}),[]),c.a.createElement(v.a,null,c.a.createElement(l.a,null,c.a.createElement(s.a,null,c.a.createElement(o.a,{className:"Recent-Users"},c.a.createElement(o.a.Header,null,c.a.createElement(o.a.Title,{as:"h5"},"Liste des utilisateurs"),c.a.createElement("div",{className:"card-header-right"},c.a.createElement(b.b,{to:"/contribuables/new"},c.a.createElement(i.a,{variant:"secondary",size:"sm"},c.a.createElement("i",{className:"feather icon-user-plus"}),"AJOUTER")))),c.a.createElement(o.a.Body,{className:"px-0 py-2"},c.a.createElement(u.a,{responsive:!0,hover:!0},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,"#"),c.a.createElement("td",null,"Utilisateur"),c.a.createElement("td",null,"Droit d'utilisation"),c.a.createElement("td",null,"Date de cr\xe9ation"),c.a.createElement("td",null,"Options")),S?c.a.createElement("tr",{className:"unread text-center"},c.a.createElement("td",{colSpan:4},c.a.createElement(m.a,{animation:"border",role:"status"}))):j.length>0?j.map((function(t){return c.a.createElement("tr",{className:"unread",key:t.id,style:{cursor:"pointer"}},c.a.createElement("td",null,c.a.createElement(p.LazyLoadImage,{onError:_,className:"rounded-circle",style:{width:"40px"},src:a+t.photo,alt:"activity-user"})),c.a.createElement("td",null,c.a.createElement("h6",{className:"mb-1"},t.nom," ",t.prenom),c.a.createElement("small",{className:"m-0"},t.email)),c.a.createElement("td",null,c.a.createElement("h6",{className:"mb-1"},1===t.type_user_id?"Administrateur":"Utilisateur")),c.a.createElement("td",null,c.a.createElement("h6",{className:"text-muted"},c.a.createElement("i",{className:"fa fa-circle text-c-green f-10 m-r-15"}),t.created_at)),c.a.createElement("td",null,c.a.createElement("button",{className:"theme-bg-btn red",onClick:function(){return e=t.contribuable.id,void Object(h.b)().fire({preConfirm:function(){return Object(h.b)().getCancelButton().setAttribute("style","display:none"),localStorage.removeItem("contribuables"),f.a.delete(e).then((function(e){Object(h.a)().fire(e.data.message,"","success")})).catch((function(e){Object(h.b)().close(),setTimeout((function(){return Object(h.c)(e)}),500)})).finally((function(){return A()}))}});var e}},"Supprimer"),c.a.createElement("button",{className:"theme-bg-btn blue",onClick:function(){return function(t){e.push({pathname:"/contribuables/details",state:{item:t}})}(t)}},"D\xe9tails")))})):c.a.createElement("tr",{className:"unread text-center"},c.a.createElement("td",{colSpan:4},"Aucune r\xe9sultat")))))))))}},56:function(e,t,a){"use strict";var n=a(61),r=a.n(n),c=a(54),l=JSON.parse(localStorage.getItem("user")),s=null!==l?l.token:"",o=r.a.create({baseURL:"".concat(c.a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});t.a=o},60:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return c}));var n=a(67),r=a.n(n),c=(a(68),function(){return r.a.mixin({toast:!0,showConfirmButton:!1,customClass:{container:"ml-popup",popup:"hover-popup"},showClass:{popup:"animate__animated animate__fadeInDown"},hideClass:{popup:"animate__animated animate__fadeOutDown"}})}),l=function(){return r.a.mixin({backdrop:!0,title:"Attention",text:"Voulez vous vraiment supprimer ?",icon:"warning",buttonsStyling:!1,customClass:{popup:"swal-sm",confirmButton:"btn btn-danger btn-sm",cancelButton:"btn btn-secondary btn-sm"},confirmButtonText:"Confirmer",cancelButtonText:"Annuler",showCancelButton:!0,allowOutsideClick:!1,allowEscapeKey:!1,showLoaderOnConfirm:!0})},s=function(e){e.response.data?c().fire({title:e.response.data.message,icon:"error"}):c().fire({title:"Erreur survenue au serveur",html:"Veuillez contacter l'administrateur",icon:"error"})}},89:function(e,t,a){"use strict";var n=a(1),r=a(5),c=a(52),l=a.n(c),s=a(0),o=a.n(s),i=a(53),u=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],m=o.a.forwardRef((function(e,t){var a=e.bsPrefix,c=e.className,s=e.striped,m=e.bordered,d=e.borderless,b=e.hover,p=e.size,f=e.variant,E=e.responsive,h=Object(r.a)(e,u),v=Object(i.a)(a,"table"),g=l()(c,v,f&&v+"-"+f,p&&v+"-"+p,s&&v+"-striped",m&&v+"-bordered",d&&v+"-borderless",b&&v+"-hover"),O=o.a.createElement("table",Object(n.a)({},h,{className:g,ref:t}));if(E){var N=v+"-responsive";return"string"===typeof E&&(N=N+"-"+E),o.a.createElement("div",{className:N},O)}return O}));t.a=m}}]);
//# sourceMappingURL=21.cf8e537d.chunk.js.map