{"version":3,"sources":["components/Administrateur/Application/edit.js","utils/index.js","components/Common/SweetModal.js","utils/app.js"],"names":["EditApp","location","useLocation","history","useHistory","path","API_SERVER","fileRef","useRef","useState","id","code_app","nom_app","abrev_app","desc_app","lien_app","type_app","file","app","setApp","uptadedApp","setUpdtatedApp","loading","setLoading","undefined","error","setError","errors","setErrors","progress","setProgress","basename","preview","setPreview","color","text","uploadMessage","setUploadMessage","handleInputChange","e","target","name","value","handleCheckChange","parseInt","handleEvent","setTimeout","loaded","fileSize","type","result","fileName","console","log","useEffect","state","item","logo_app","includes","split","push","setDefaultValues","onSubmit","preventDefault","Object","keys","length","formErrors","newErrors","trim","startsWith","validateForm","data","AppApi","update","then","res","localStorage","removeItem","catch","err","response","message","Header","Title","as","Body","md","onClick","current","click","Img","style","height","variant","src","alt","className","accept","ref","onChange","event","image","files","fileExtension","pop","toLowerCase","indexOf","reader","FileReader","size","addEventListener","addListeners","readAsDataURL","hidden","animated","now","Group","Row","Label","column","sm","Prepend","Text","placeholder","Feedback","checked","title","htmlFor","Control","rows","disabled","animation","role","aria-hidden","deleteModal","fire","preConfirm","getCancelButton","setAttribute","delete","close","errorModal","to","user","JSON","parse","getItem","token","axios","Axios","create","baseURL","headers","Authorization","Toast","Swal","mixin","toast","showConfirmButton","customClass","container","popup","showClass","hideClass","backdrop","icon","buttonsStyling","confirmButton","cancelButton","confirmButtonText","cancelButtonText","showCancelButton","allowOutsideClick","allowEscapeKey","showLoaderOnConfirm","html","getAll","get","base","post","add"],"mappings":"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","file":"static/js/22.59660d39.chunk.js","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\r\nimport { Link, useHistory, useLocation} from 'react-router-dom'\r\nimport {Form, InputGroup, FormControl, Row, Col, Card, Button, Spinner, ProgressBar} from 'react-bootstrap';\r\nimport { API_SERVER , basename } from \"config/constant\";\r\nimport { deleteModal, errorModal } from 'components/Common/SweetModal';\r\nimport Aux from \"hoc/_Aux\";\r\nimport AppApi from 'utils/app';\r\n\r\nconst EditApp = () => {\r\n    const location = useLocation();\r\n    const history = useHistory();\r\n    const path = API_SERVER + 'storage/';\r\n    const fileRef = useRef();\r\n\r\n    const initialStateApp = {\r\n        id: 0,\r\n        code_app: '',\r\n        nom_app: '',\r\n        abrev_app: '',\r\n        desc_app: '',\r\n        lien_app: 'https://',\r\n        type_app: 0,\r\n        file: ''\r\n    }\r\n\r\n    const [app, setApp] = useState(initialStateApp)\r\n    const [uptadedApp, setUpdtatedApp] = useState({})\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(undefined);\r\n    const [errors, setErrors] = useState({});\r\n    const [progress, setProgress] = useState(0)\r\n    const [preview, setPreview] = useState(basename+\"/no-import.png\");\r\n    const [uploadMessage, setUploadMessage] = useState({\r\n        color : \"text-muted\",\r\n        text : \"Veuillez importer une icône ici\"\r\n    });\r\n\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setApp({ ...app, [name]: value });\r\n        setUpdtatedApp({...uptadedApp, [name]: value });\r\n        if(!!errors[name]){\r\n            setErrors({...errors, [name]:null})\r\n        }\r\n    };\r\n\r\n    const handleCheckChange = (e) => {\r\n        const value = parseInt(e.target.value)\r\n        setApp({...app, type_app: value })\r\n        setUpdtatedApp({...uptadedApp, type_app: value });\r\n    }\r\n\r\n    function handleEvent(e) {\r\n        setTimeout(() => {\r\n            const value = parseInt( ((e.loaded / e.target.fileSize) * 100), 10 );\r\n            setProgress(value)\r\n            if (e.type === \"loadend\") {\r\n                const result = e.target.result\r\n                setUploadMessage({color: \"text-muted\", text: e.target.fileName})\r\n                setPreview(result);\r\n                setApp({ ...app, file: result });\r\n                setUpdtatedApp({...uptadedApp, file: result });\r\n                console.log(e.target.result);\r\n                setTimeout(() => {\r\n                    setProgress(0)\r\n                }, 100); \r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    function addListeners(reader) {\r\n        reader.addEventListener('loadstart', handleEvent);\r\n        reader.addEventListener('load', handleEvent);\r\n        reader.addEventListener('loadend', handleEvent);\r\n        reader.addEventListener('progress', handleEvent);\r\n        reader.addEventListener('error', handleEvent);\r\n        reader.addEventListener('abort', handleEvent);\r\n    }\r\n\r\n    const handleInputFileChange = event => {\r\n        const image = event.target.files[0]\r\n        var ext = [\"jpg\",\"jpeg\",\"png\"]\r\n        if(image){\r\n            var fileExtension = image.name.split('.').pop().toLowerCase()\r\n            if(ext.indexOf(fileExtension)>-1){\r\n                const reader = new FileReader();\r\n                reader.fileName = image.name;\r\n                reader.fileSize = image.size;\r\n                addListeners(reader);\r\n                reader.readAsDataURL(image);\r\n            } else{\r\n                setUploadMessage({color: \"text-danger\", text: \"Fichier invalide!\"})\r\n            }\r\n        }\r\n    }\r\n\r\n    const validateForm = () => {\r\n        const {code_app, nom_app, lien_app} = app;\r\n        const newErrors = {}\r\n        if(!code_app || code_app.trim() === '') newErrors.code_app = \"Veuillez entrer le code de l'application\"\r\n        if(!nom_app || nom_app.trim() === '') newErrors.nom_app = \"Veuillez entrer le nom de l'application\"\r\n        if(!lien_app || lien_app.trim() === '') newErrors.lien_app = \"Veuillez entrer le lien vers l'application\"\r\n        else if(!lien_app.trim().startsWith('http://') && !lien_app.trim().startsWith('https://')) newErrors.lien_app = \"Veuillez entrer une url valide\"\r\n        return newErrors\r\n    }\r\n\r\n    const remove = (e) => {\r\n        e.preventDefault()\r\n        deleteModal().fire({\r\n            preConfirm: () => {\r\n                deleteModal().getCancelButton().setAttribute(\"style\",\"display:none\")\r\n                localStorage.removeItem(\"apps\")\r\n                return AppApi.delete(app.id)\r\n                .then((res)=>{\r\n                    console.log(res);\r\n                    return history.push('/apps')\r\n                }).catch((err)=>{\r\n                    deleteModal().close();\r\n                    setTimeout(() => errorModal(err), 500);\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    const save = (e) => {\r\n        e.preventDefault();\r\n        setError(undefined)\r\n        if(Object.keys(uptadedApp).length <= 0){\r\n            return history.push('/apps');\r\n        }\r\n\r\n        setLoading(true);\r\n        const formErrors = validateForm()\r\n        if(Object.keys(formErrors).length > 0){\r\n            setLoading(false);\r\n            return setErrors(formErrors)\r\n        }\r\n        let data = {...app}\r\n        console.log(data);\r\n\r\n        AppApi.update(app.id, data).then((res)=>{\r\n            console.log(res);\r\n            localStorage.removeItem('apps');\r\n            history.push('/apps');\r\n        }).catch((err)=>{\r\n            if (err.response.data) {\r\n                setError(err.response.data.message);\r\n            } else setError(\"Erreur survenue au serveur \\n Veuillez contacter l'administrateur.\");\r\n            setLoading(false);\r\n        })\r\n    }\r\n\r\n    const setDefaultValues = () => {\r\n        if(location.state && location.state.item){\r\n            let item =  location.state.item;\r\n            item.abrev_app = item.abrev_app || ''\r\n            item.desc_app = item.desc_app || ''\r\n            if(!item.logo_app.includes('default-logo')){\r\n                setPreview(path + item.logo_app)\r\n                setUploadMessage({...uploadMessage, text: item.logo_app.split('/')[1]})\r\n            }\r\n            setApp({...item});\r\n        } else {\r\n            history.push('/apps')\r\n        }\r\n    }\r\n    \r\n    useEffect(() => {\r\n        setDefaultValues();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n    \r\n  return (\r\n        <Aux>\r\n            <Row>\r\n                <Col>\r\n                    {/* --------------------------------------------- AJOUTER -----------------------------------------------------------------------*/}\r\n                    <Form onSubmit={save}>\r\n                        <Card>\r\n                            <Card.Header>\r\n                                <Card.Title as=\"h5\"> Modifier une application </Card.Title>\r\n                            </Card.Header>\r\n                            <Card.Body>\r\n                                <Row>\r\n                                    <Col md={2}>\r\n                                        <Card onClick={() => fileRef.current.click()}>\r\n                                            <Card.Img style={{ height : '100%' }} variant=\"top\" src={ preview } alt=\"activity-user\" />\r\n                                            <small className={`mt-3 text-center ${uploadMessage.color}`} >{uploadMessage.text}</small>\r\n                                            <FormControl type=\"file\" id=\"logo_app\" name=\"logo_app\" accept=\"image/*\" ref={fileRef} onChange={handleInputFileChange} hidden />\r\n                                        </Card>\r\n                                        <ProgressBar className={(progress === 0 ) && \"d-none\"} animated now={progress} />\r\n                                    </Col>\r\n                                    <Col></Col>\r\n                                    <Col md={8} >\r\n                                        <Form.Group as={Row} className=\"mb-3\">\r\n                                            <Form.Label column sm={3}>Code Application </Form.Label>\r\n                                            <Col>\r\n                                                <InputGroup size=\"sm\" id=\"inputGroup-nom\">\r\n                                                    <InputGroup.Prepend>\r\n                                                        <InputGroup.Text><i className=\"feather icon-user\"></i></InputGroup.Text>\r\n                                                    </InputGroup.Prepend>\r\n                                                    <FormControl className={errors.code_app && \"is-invalid\"} id=\"code_app\" name=\"code_app\" placeholder=\"Code Application\" value={app.code_app} onChange={handleInputChange}/>\r\n                                                <FormControl.Feedback type=\"invalid\" className=\"text-right\">{errors.code_app}</FormControl.Feedback>\r\n                                                </InputGroup>\r\n                                            </Col>\r\n                                        </Form.Group>\r\n                                        <Form.Group as={Row} className=\"mb-3\">\r\n                                            <Form.Label column sm={3}>Nom de l'application </Form.Label>\r\n                                            <Col>\r\n                                                <InputGroup size=\"sm\">\r\n                                                    <InputGroup.Prepend>\r\n                                                        <InputGroup.Text><i className=\"feather icon-user\"></i></InputGroup.Text>\r\n                                                    </InputGroup.Prepend>\r\n                                                    <FormControl className={errors.nom_app && \"is-invalid\"} id=\"nom_app\" name=\"nom_app\" placeholder=\"Nom de l'application\" value={app.nom_app} onChange={handleInputChange} />\r\n                                                    <FormControl.Feedback type=\"invalid\" className=\"text-right\">{errors.nom_app}</FormControl.Feedback>\r\n                                                </InputGroup>\r\n                                            </Col>\r\n                                        </Form.Group>\r\n                                        <Form.Group as={Row} className=\"mb-3\">\r\n                                            <Form.Label column sm={3}>Abréviation </Form.Label>\r\n                                            <Col>\r\n                                                <InputGroup size=\"sm\">\r\n                                                    <InputGroup.Prepend>\r\n                                                        <InputGroup.Text><i className=\"feather icon-user\"></i></InputGroup.Text>\r\n                                                    </InputGroup.Prepend>\r\n                                                    <FormControl id=\"abrev_app\" name=\"abrev_app\" placeholder=\"Abréviation\" value={app.abrev_app} onChange={handleInputChange} />\r\n                                                </InputGroup>\r\n                                            </Col>\r\n                                        </Form.Group>\r\n                                        <Form.Group as={Row} className=\"mb-3\">\r\n                                            <Form.Label column sm={3}> Type d'application </Form.Label>\r\n                                            <Col className=\"mt-2\">\r\n                                                <div className=\"form-check\">\r\n                                                    <input name=\"type_app\" type=\"radio\" id=\"type_app_0\" className=\"form-check-input\" value=\"0\" \r\n                                                           style={{\"cursor\":\"pointer\"}} checked={(app.type_app === 0)} onChange={handleCheckChange}/>\r\n                                                    <label title=\"\" htmlFor=\"type_app_0\" className=\"form-check-label\" style={{\"cursor\":\"pointer\"}}>Application par défaut</label>\r\n                                                </div>\r\n                                            </Col>\r\n                                            <Col className=\"mt-2\">\r\n                                                <div className=\"form-check\">\r\n                                                    <input name=\"type_app\" type=\"radio\" id=\"type_app_1\" className=\"form-check-input\" value=\"1\" \r\n                                                           style={{\"cursor\":\"pointer\"}} checked={(app.type_app === 1)} onChange={handleCheckChange}/>\r\n                                                    <label title=\"\" htmlFor=\"type_app_1\" className=\"form-check-label\" style={{\"cursor\":\"pointer\"}}>Application privilegiée</label>\r\n                                                </div>\r\n                                                {/* <Form.Check style={{\"cursor\":\"pointer\"}} checked={(app.type_app === 1)} type=\"radio\" id=\"type_app_1\" name=\"type_app\" label=\"Application privilegiée\" value=\"1\" onChange={()=>setApp({...app, type_app : 1})} /> */}\r\n                                            </Col>\r\n                                        </Form.Group>\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row>\r\n                                    <Col md={6}>\r\n                                        <Form.Group className=\"mb-3\">\r\n                                            <Form.Label>Description </Form.Label>\r\n                                            <Form.Control as=\"textarea\" rows=\"5\" id=\"desc_app\" name=\"desc_app\" value={app.desc_app} onChange={handleInputChange} />\r\n                                        </Form.Group> \r\n                                    </Col>\r\n                                    <Col md={6}>\r\n                                        <Form.Group className=\"mb-3\">\r\n                                            <Form.Label>Lien </Form.Label>\r\n                                            <Form.Control className={errors.lien_app && \"is-invalid\"} as=\"textarea\" rows=\"1\" id=\"lien_app\" name=\"lien_app\" value={app.lien_app} onChange={handleInputChange} />\r\n                                            <FormControl.Feedback type=\"invalid\" className=\"text-right\">{errors.lien_app}</FormControl.Feedback>\r\n                                        </Form.Group> \r\n                                        {error && (\r\n                                            <p className=\"text-danger form-text m-3\">{error}</p>\r\n                                        )}\r\n\r\n                                        {(loading && (\r\n                                            <Button variant=\"primary\" size=\"sm\" className=\"pull-right mt-2\" disabled>\r\n                                                <Spinner as=\"span\" className=\"mr-2\" size=\"sm\" animation=\"border\" role=\"status\" aria-hidden=\"true\" />\r\n                                                Veuillez patientez ...\r\n                                            </Button>\r\n                                        )) || (\r\n                                            <>\r\n                                                <Button className=\"mt-2\" variant=\"danger\" size=\"sm\" onClick={remove}>\r\n                                                    <i className=\"feather icon-trash\"></i>Supprimer\r\n                                                </Button>\r\n                                                <div className=\"pull-right mt-2\">\r\n                                                    <Link to=\"/apps\">\r\n                                                        <Button variant=\"secondary\" size=\"sm\">\r\n                                                            <i className=\"feather icon-x-circle\"></i>Annuler\r\n                                                        </Button>\r\n                                                    </Link>\r\n                                                    <Button type=\"submit\" size=\"sm\" variant=\"primary\">\r\n                                                        <i className=\"feather icon-save\"></i>Sauvegarder\r\n                                                    </Button>\r\n                                                </div>\r\n                                            </>\r\n                                        )}\r\n\r\n                                    </Col>\r\n                                </Row>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </Form>\r\n                </Col>\r\n            </Row>\r\n        </Aux>\r\n  )\r\n}\r\n\r\nexport default EditApp;","import Axios from \"axios\";\r\nimport { API_SERVER } from \"../config/constant\";\r\n// import swal from \"sweetalert2\";\r\n\r\nconst user = JSON.parse(localStorage.getItem(\"user\"));\r\nconst token = user !== null ? user.token : \"\";\r\nconst axios = Axios.create({\r\n  baseURL: `${API_SERVER}`,\r\n  headers: { \"Content-Type\": \"application/json\", Authorization: `Bearer ${token}` },\r\n});\r\n\r\n/*axios.interceptors.request.use(\r\n  (config) => {\r\n    // trigger 'loading=true' event here\r\n    // if (config.url !== `/sanctum/csrf-cookie`) {\r\n    swal.fire({\r\n      title: \"Veuillez patientez\",\r\n      imageUrl: `${API_SERVER}loading2.gif`,\r\n      imageWidth: 50,\r\n      imageHeight: 50,\r\n      imageAlt: \"Attendre\",\r\n      allowOutsideClick: false,\r\n      showConfirmButton: false,\r\n    });\r\n    // }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    // trigger 'loading=false' event here\r\n    swal.close();\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\naxios.interceptors.response.use(\r\n  (response) => {\r\n    // trigger 'loading=false' event here\r\n    swal.close();\r\n    return response;\r\n  },\r\n  (error) => {\r\n    // trigger 'loading=false' event here\r\n    swal.close();\r\n    return Promise.reject(error);\r\n  }\r\n);*/\r\n\r\nexport default axios;\r\n","import Swal from 'sweetalert2';\r\nimport 'animate.css';\r\n\r\nconst Toast = () => {\r\n    return Swal.mixin({\r\n        toast: true,\r\n        showConfirmButton: false,\r\n        customClass : { container: 'ml-popup', popup : 'hover-popup'},\r\n        showClass: {\r\n            popup: 'animate__animated animate__fadeInDown'\r\n        },\r\n        hideClass: {\r\n            popup: 'animate__animated animate__fadeOutDown'\r\n        }\r\n    })\r\n}\r\n\r\nconst deleteModal = () => {\r\n    return Swal.mixin({\r\n        // toast: true,\r\n        backdrop : true,\r\n        title : 'Attention',\r\n        text: 'Voulez vous vraiment supprimer ?',\r\n        icon: 'warning',\r\n        buttonsStyling: false,\r\n        customClass : { \r\n            popup : 'swal-sm', \r\n            confirmButton : 'btn btn-danger btn-sm',\r\n            cancelButton : 'btn btn-secondary btn-sm'\r\n        },\r\n        confirmButtonText : 'Confirmer', \r\n        cancelButtonText : 'Annuler', \r\n        showCancelButton: true,\r\n        allowOutsideClick: false,\r\n        allowEscapeKey: false,\r\n        showLoaderOnConfirm: true,\r\n    })\r\n}\r\n\r\nconst errorModal = (err) => {\r\n    if (err.response.data) {\r\n        Toast().fire({title: err.response.data.message, icon:'error'})\r\n    } else Toast().fire({\r\n        title: \"Erreur survenue au serveur\",\r\n        html : `Veuillez contacter l'administrateur`,\r\n        icon:'error'\r\n    })\r\n}\r\n\r\n/*const errorModal = (err) => {\r\n    const modal = Swal.mixin({\r\n        icon: 'error',\r\n        buttonsStyling: false,\r\n        customClass : { popup : 'swal-sm', confirmButton : 'btn btn-danger' }\r\n    });\r\n    if (err.response.data) {\r\n        modal.fire({html: err.response.data.message})\r\n    } else modal.fire({html: \"Erreur survenue au serveur <br/> Veuillez contacter l'administrateur.\"})\r\n}*/\r\n\r\nexport { deleteModal, errorModal ,Toast } \r\n","import axios from \"./index\";\r\n\r\nclass AppApi {\r\n  static getAll = () => {\r\n    return axios.get(`${base}`);\r\n  };\r\n\r\n  static delete = (id) => {\r\n    return axios.delete(`${base}/${id}`);\r\n  };\r\n\r\n  static update = (id, data) => {\r\n    return axios.post(`${base}/${id}?_method=PUT`, data);\r\n  };\r\n\r\n  static add = (data) => {\r\n    return axios.post(`${base}`, data);\r\n  };\r\n}\r\n\r\nlet base = \"api/applications\";\r\n\r\nexport default AppApi;\r\n"],"sourceRoot":""}